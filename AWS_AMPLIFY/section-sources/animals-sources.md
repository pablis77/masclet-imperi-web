# Estructura de Archivos - Sección ANIMALES

*Captura directa de la pestaña Sources del navegador*

## Estructura Completa

```
top/
├── localhost:3000/
│   ├── @fs/C:/Proyectos/claude/masclet-imperi-web/frontend/node_modules/a...
│   ├── @id/
│   │   └── astro:scripts/
│   │       ├── before-hydration.js
│   │       ├── before-hydration.js
│   │       ├── _x00_astro:toolbar:internal
│   │       └── _x00_astro:toolbar:internal
│   ├── @vite/
│   │   ├── client
│   │   └── client
│   ├── images/
│   │   └── logo_masclet.png
│   ├── node_modules/
│   │   ├── .vite/deps/
│   │   ├── @astrojs/tailwind/
│   │   ├── astro/
│   │   └── html-escaper/esm/
│   ├── scripts/
│   │   ├── bloquear-acciones-listados.js
│   │   ├── bloquear-actualizar-animal.js
│   │   ├── bloquear-editar-parto.js
│   │   ├── bloquear-eliminar-parto.js
│   │   └── permissions-ui.js
│   └── src/
│       ├── components/
│       │   ├── animals/
│       │   │   ├── AnimalFilters.tsx
│       │   │   ├── AnimalFilters.tsx
│       │   │   ├── AnimalTable.tsx
│       │   │   └── AnimalTable.tsx
│       │   ├── layout/
│       │   │   ├── Footer.astro
│       │   │   ├── Footer.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Footer.astro?astro&type=style&index=0&lang.css
│       │   │   ├── MainLayout.astro
│       │   │   ├── MainLayout.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=style&index=0&lang.css
│       │   │   ├── Navbar.astro
│       │   │   ├── Navbar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Navbar.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── Sidebar.astro
│       │   │   ├── Sidebar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Sidebar.astro?astro&type=script&index=1&lang.ts
│       │   │   └── Sidebar.astro?astro&type=style&index=0&lang.css
│       │   ├── notifications/
│       │   │   ├── NotificationsMenu.js
│       │   │   └── NotificationsMenu.js
│       │   ├── LanguageSwitcher.astro
│       │   ├── LanguageSwitcher.astro?astro&type=script&index=0&lang.ts
│       │   └── LanguageSwitcher.astro?astro&type=style&index=0&lang.css
│       ├── config/
│       │   ├── apiConfig.centralizado.ts
│       │   └── apiConfig.centralizado.ts
│       ├── i18n/
│       │   ├── locales/
│       │   │   ├── ca.json?import
│       │   │   ├── es.json?import
│       │   │   ├── config.ts
│       │   │   └── config.ts
│       │   └── pages/animals/
│       │       ├── index.astro
│       │       ├── index.astro?astro&type=script&index=0&lang.ts
│       │       ├── index.astro?astro&type=style&index=0&lang.css
│       ├── services/
│       │   ├── animalService.ts
│       │   ├── animalService.ts
│       │   ├── api.ts
│       │   ├── api.ts
│       │   ├── apiConfigAdapter.ts
│       │   ├── apiConfigAdapter.ts
│       │   ├── apiService.ts
│       │   ├── apiService.ts
│       │   ├── mockData.ts
│       │   ├── mockData.ts
│       │   ├── notificationService.ts
│       │   └── notificationService.ts
└── animals
    ├── @react-refresh
    └── @react-refresh
```

## Ficha de Animal (Detalle)

```
top/
├── localhost:3000/
│   ├── @id/
│   │   └── astro:scripts/
│   │       ├── _x00_astro:toolbar:internal
│   │       └── _x00_astro:toolbar:internal
│   ├── @vite/
│   │   ├── client
│   │   └── client
│   ├── animals/
│   │   └── 3083
│   ├── images/
│   │   ├── logo_masclet.png
│   │   └── toro_sin_borde_2.png
│   ├── node_modules/
│   ├── scripts/
│   │   ├── animal-history.js
│   │   ├── block-delete-buttons.js
│   │   ├── bloquear-acciones-listados.js
│   │   ├── bloquear-actualizar-animal.js
│   │   ├── bloquear-editar-parto.js
│   │   ├── bloquear-eliminar-parto.js
│   │   ├── editar-parto-v4.js
│   │   └── permissions-ui.js
│   └── src/
│       ├── components/
│       │   ├── layout/
│       │   │   ├── Footer.astro
│       │   │   ├── Footer.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Footer.astro?astro&type=style&index=0&lang.css
│       │   │   ├── MainLayout.astro
│       │   │   ├── MainLayout.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=style&index=0&lang.css
│       │   │   ├── Navbar.astro
│       │   │   ├── Navbar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Navbar.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── Sidebar.astro
│       │   │   ├── Sidebar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Sidebar.astro?astro&type=script&index=1&lang.ts
│       │   │   └── Sidebar.astro?astro&type=style&index=0&lang.css
│       │   ├── notifications/
│       │   │   ├── NotificationsMenu.js
│       │   │   └── NotificationsMenu.js
│       │   ├── LanguageSwitcher.astro
│       │   ├── LanguageSwitcher.astro?astro&type=script&index=0&lang.ts
│       │   └── LanguageSwitcher.astro?astro&type=style&index=0&lang.css
│       ├── i18n/
│       │   ├── locales/
│       │   │   ├── config.ts
│       │   │   └── config.ts
│       │   └── pages/animals/
│       │       ├── [id].astro
│       │       ├── [id].astro?astro&type=script&index=0&lang.ts
│       │       ├── [id].astro?astro&type=script&index=1&lang.ts
│       │       ├── [id].astro?astro&type=script&index=2&lang.ts
│       └── services/
│           ├── notificationService.ts
│           └── notificationService.ts
└── cdnjs.cloudflare.com/
```

## Archivos Clave

### Componentes Principales de Animales
- `src/components/animals/AnimalFilters.tsx` - Filtros para el listado de animales
- `src/components/animals/AnimalTable.tsx` - Tabla para mostrar listado de animales
- `src/pages/animals/index.astro` - Página principal de animales
- `src/pages/animals/[id].astro` - Página de detalle de animal individual

### Scripts Específicos
- `scripts/animal-history.js` - Historial de un animal
- `scripts/block-delete-buttons.js` - Bloqueo de botones de eliminación
- `scripts/editar-parto-v4.js` - Edición de partos versión 4

### Servicios de Backend
- `src/services/animalService.ts` - Servicios específicos para animales
- `src/services/api.ts` - Servicios genéricos de API 
- `src/services/mockData.ts` - Datos de prueba

### Recursos Estáticos
- `images/logo_masclet.png` - Logo de Masclet
- `images/toro_sin_borde_2.png` - Imagen de toro (solo en la ficha)

## Observaciones
- La sección de animales tiene componentes específicos para filtrado y presentación tabular
- El detalle del animal utiliza una ruta dinámica `/animals/[id]` (en este caso `/animals/3083`)
- La sección incluye scripts específicos para manipulación de historial y restricciones especiales
- Se agregan scripts específicos en la vista de detalle como `editar-parto-v4.js`
- La vista detalle incluye la imagen de toro (`toro_sin_borde_2.png`)
- El problema detectado en la actualización parece estar relacionado con el componente `HabitualesForm.astro` que no aparece en el árbol de fuentes pero genera error en la consola
- La ficha animal carga desde una API dinámica (`/api/v1/animals/3083`)

## Actualizar Ficha Animal (Update)

```
top/
├── localhost:3000/
│   ├── @fs/C:/Proyectos/claude/masclet-imperi-web/frontend/node_modules/a...
│   ├── @id/
│   │   └── _x00_astro:toolbar:internal
│   │       └── _x00_astro:toolbar:internal
│   ├── @vite/
│   │   ├── client
│   │   └── client
│   ├── animals/update
│   │   └── 3120
│   ├── images/
│   │   ├── logo_masclet.jpg
│   │   ├── logo_masclet.png
│   │   ├── toro_sin_borde_2.png
│   │   ├── vaca_azul.png
│   │   └── vaca_blanca.png
│   ├── node_modules/
│   ├── scripts/
│   │   ├── block-delete-button.js
│   │   ├── bloquear-acciones-listados.js
│   │   ├── bloquear-actualizar-animal.js
│   │   ├── bloquear-editar-parto.js
│   │   ├── bloquear-eliminar-parto.js
│   │   ├── permissions-ui.js
│   │   └── translation-fixer.js
│   └── src/
│       ├── components/
│       │   ├── animals/
│       │   │   ├── AnimalForm.astro
│       │   │   ├── HabitualesForm.astro
│       │   │   └── HabitualesForm.astro?astro&type=script&index=0&lang.ts
│       │   ├── layout/
│       │   │   ├── Footer.astro
│       │   │   ├── Footer.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Footer.astro?astro&type=style&index=0&lang.css
│       │   │   ├── MainLayout.astro
│       │   │   ├── MainLayout.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=style&index=0&lang.css
│       │   │   ├── Navbar.astro
│       │   │   ├── Navbar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Navbar.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── Sidebar.astro
│       │   │   ├── Sidebar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Sidebar.astro?astro&type=script&index=1&lang.ts
│       │   │   └── Sidebar.astro?astro&type=style&index=0&lang.css
│       │   ├── notifications/
│       │   │   ├── NotificationsMenu.js
│       │   │   └── NotificationsMenu.js
│       │   ├── LanguageSwitcher.astro
│       │   ├── LanguageSwitcher.astro?astro&type=script&index=0&lang.ts
│       │   └── LanguageSwitcher.astro?astro&type=style&index=0&lang.css
│       ├── i18n/
│       │   ├── locales/
│       │   │   ├── ca.json?import
│       │   │   ├── es.json?import
│       │   │   ├── config.ts
│       │   │   └── config.ts
│       │   └── pages/animals/update/
│       │       ├── [id].astro
│       │       ├── [id].astro?astro&type=script&index=0&lang.ts
│       │       └── [id].astro?astro&type=script&index=1&lang.ts
│       ├── services/
│       │   ├── notificationService.ts
│       │   └── notificationService.ts
│       └── ui/
│           ├── MessageContainer.astro
│           ├── MessageContainer.astro?astro&type=script&index=0&lang.ts
│           ├── LanguageSwitcher.astro
│           ├── LanguageSwitcher.astro?astro&type=script&index=0&lang.ts
│           └── LanguageSwitcher.astro?astro&type=style&index=0&lang.css
│       ├── config/
│       │   ├── apiConfig.centralizado.ts
│       │   └── apiConfig.centralizado.ts
```

## Registrar Nuevo Animal

```
top/
├── localhost:3000/
│   ├── @fs/C:/Proyectos/claude/masclet-imperi-web/frontend/node_modules/a...
│   ├── @id/
│   │   └── _x00_astro:toolbar:internal
│   │       └── _x00_astro:toolbar:internal
│   ├── @vite/
│   │   ├── client
│   │   └── client
│   ├── animals/
│   │   └── new
│   ├── images/
│   │   ├── logo_masclet.jpg
│   │   ├── logo_masclet.png
│   │   ├── toro_sin_borde_2.png
│   │   ├── vaca_azul.png
│   │   └── vaca_blanca.png
│   ├── node_modules/
│   ├── scripts/
│   │   ├── bloquear-acciones-listados.js
│   │   ├── bloquear-actualizar-animal.js
│   │   ├── bloquear-editar-parto.js
│   │   ├── bloquear-eliminar-parto.js
│   │   └── permissions-ui.js
│   └── src/
│       ├── components/
│       │   ├── animals/
│       │   │   ├── CreateAnimalForm.astro
│       │   │   └── CreateAnimalForm.astro?astro&type=script&index=0&lang.ts
│       │   ├── layout/
│       │   │   ├── Footer.astro
│       │   │   ├── Footer.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Footer.astro?astro&type=style&index=0&lang.css
│       │   │   ├── MainLayout.astro
│       │   │   ├── MainLayout.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── MainLayout.astro?astro&type=style&index=0&lang.css
│       │   │   ├── Navbar.astro
│       │   │   ├── Navbar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Navbar.astro?astro&type=script&index=1&lang.ts
│       │   │   ├── Sidebar.astro
│       │   │   ├── Sidebar.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── Sidebar.astro?astro&type=script&index=1&lang.ts
│       │   │   └── Sidebar.astro?astro&type=style&index=0&lang.css
│       │   ├── notifications/
│       │   │   ├── NotificationsMenu.js
│       │   │   └── NotificationsMenu.js
│       │   ├── ui/
│       │   │   ├── MessageContainer.astro
│       │   │   └── MessageContainer.astro?astro&type=script&index=0&lang.ts
│       │   │   ├── LanguageSwitcher.astro
│       │   │   ├── LanguageSwitcher.astro?astro&type=script&index=0&lang.ts
│       │   │   └── LanguageSwitcher.astro?astro&type=style&index=0&lang.css
│       ├── config/
│       │   ├── apiConfig.centralizado.ts
│       │   └── apiConfig.centralizado.ts
│       ├── i18n/
│       │   ├── locales/
│       │   │   ├── ca.json?import
│       │   │   ├── es.json?import
│       │   │   ├── config.ts
│       │   │   └── config.ts
│       ├── pages/animals/
│       │   └── new.astro
│       │       └── new.astro?astro&type=script&index=0&lang.ts
│       ├── services/
│       │   ├── animalService.ts
│       │   ├── animalService.ts
│       │   ├── api.ts
│       │   ├── api.ts
│       │   ├── apiConfigAdapter.ts
│       │   ├── apiConfigAdapter.ts
│       │   ├── apiService.ts
│       │   ├── apiService.ts
│       │   ├── mockData.ts
│       │   ├── mockData.ts
│       │   ├── notificationService.ts
│       │   └── notificationService.ts
│       ├── stores/
│       │   ├── cacheStore.ts
│       │   ├── cacheStore.ts
│       │   ├── messageStore.ts
│       │   └── messageStore.ts
```

## Archivos Clave - Actualizados

### Componentes de Actualización de Animal
- `src/components/animals/AnimalForm.astro` - Formulario general para datos básicos del animal
- `src/components/animals/HabitualesForm.astro` - Formulario para cambios habituales (estado, alletar, etc.)
- `src/pages/animals/update/[id].astro` - Página principal de actualización de animal

### Componentes de Registro de Nuevo Animal
- `src/components/animals/CreateAnimalForm.astro` - Formulario especializado para crear nuevos animales
- `src/pages/animals/new.astro` - Página de registro de nuevos animales

### Servicios Compartidos
- `src/config/apiConfig.centralizado.ts` - Configuración centralizada de la API
- `src/services/animalService.ts` - Servicios específicos para animales
- `src/services/apiService.ts` - Servicios genéricos de API
- `src/stores/messageStore.ts` - Store para gestión de mensajes al usuario

## Observaciones Adicionales
- La actualización y registro de animales utilizan componentes Astro específicos con sus propios scripts
- La funcionalidad de actualización está en una ruta anidada `/animals/update/[id]`
- El registro de nuevos animales está en la ruta `/animals/new`
- Ambas secciones comparten servicios comunes pero tienen formularios especializados
- Los formularios de actualización se dividen en datos generales (`AnimalForm`) y habituales (`HabitualesForm`)
- El historial de partos se muestra en la vista de detalle del animal, no como una sección separada
