document.addEventListener("DOMContentLoaded", () => {
  const refreshBtn = document.getElementById("refreshBtn");
  const totalAnimalsContainer = document.getElementById("totalAnimalsContainer");
  if (refreshBtn) {
    refreshBtn.addEventListener("click", () => {
      window.location.reload();
    });
  }
  document.addEventListener("animals-loaded", (e) => {
    if (totalAnimalsContainer && e.detail && e.detail.total !== void 0) {
      const currentLang = localStorage.getItem("userLanguage") || "es";
      const animalesText = currentLang === "ca" ? "animals" : "animales";
      totalAnimalsContainer.innerHTML = `<span class="text-sm text-gray-500 dark:text-gray-400">
          Total: ${e.detail.total} ${animalesText} 
        </span>`;
    }
  });
  document.addEventListener("filters-applied", (e) => {
    if (totalAnimalsContainer) {
      const currentLang = localStorage.getItem("userLanguage") || "es";
      const filtrosText = currentLang === "ca" ? "Aplicant filtres..." : "Aplicando filtros...";
      totalAnimalsContainer.innerHTML = `<span class="text-sm text-gray-500 dark:text-gray-400">
          ${filtrosText}
        </span>`;
    }
  });
  function translatePageTexts() {
    const currentLang = localStorage.getItem("userLanguage") || "es";
    if (currentLang === "ca") {
      const mainTitle = document.querySelector('[data-astro-source-loc="56:79"]');
      if (mainTitle) mainTitle.textContent = "Gestió d'Animals";
      const newAnimalBtn = document.querySelector('a[href="/animals/new"]');
      if (newAnimalBtn) {
        try {
          const token = localStorage.getItem("token");
          let userRole = "guest";
          if (token) {
            const payload = JSON.parse(atob(token.split(".")[1]));
            userRole = (payload.role || "guest").toLowerCase();
            console.log("Rol detectado en script traducción:", userRole);
          }
          if (userRole === "editor" || userRole === "usuario") {
            console.log("BLOQUEANDO BOTÓN EN SCRIPT DE TRADUCCIÓN");
            newAnimalBtn.href = "javascript:void(0);";
            newAnimalBtn.disabled = true;
            newAnimalBtn.setAttribute("disabled", "disabled");
            newAnimalBtn.style.opacity = "0.5";
            newAnimalBtn.style.pointerEvents = "none";
            newAnimalBtn.style.cursor = "not-allowed";
            newAnimalBtn.title = "NO TIENES PERMISOS PARA CREAR NUEVOS ANIMALES";
            newAnimalBtn.classList.add("opacity-50", "cursor-not-allowed");
            if (!newAnimalBtn.querySelector(".lock-icon")) {
              const lockIcon = document.createElement("span");
              lockIcon.textContent = " 🔒";
              lockIcon.className = "ml-1 lock-icon";
              newAnimalBtn.appendChild(lockIcon);
            }
            newAnimalBtn.addEventListener("click", function(e) {
              e.preventDefault();
              e.stopPropagation();
              alert("NO TIENES PERMISOS PARA CREAR NUEVOS ANIMALES");
              return false;
            });
          }
        } catch (e) {
          console.error("Error aplicando restricciones en traducción:", e);
        }
        const spanPlus = newAnimalBtn.querySelector("span");
        if (spanPlus && spanPlus.nextSibling) {
          spanPlus.nextSibling.textContent = " Nou Animal";
        }
      }
      const refreshBtn2 = document.getElementById("refreshBtn");
      if (refreshBtn2) {
        const spanRefresh = refreshBtn2.querySelector("span");
        if (spanRefresh && spanRefresh.nextSibling) {
          spanRefresh.nextSibling.textContent = " Actualitzar";
        }
      }
      const searchHeader = document.querySelector('[data-astro-source-loc="74:97"]');
      if (searchHeader) searchHeader.textContent = "Cerca i Filtres";
      const searchDesc = document.querySelector('[data-astro-source-loc="77:85"]');
      if (searchDesc) searchDesc.textContent = "Utilitza els filtres per trobar animals específics. Pots filtrar per explotació, gènere, estat i més.";
      const listHeader = document.querySelector('[data-astro-source-loc="93:97"]');
      if (listHeader) listHeader.textContent = "Llistat d'Animals";
    }
  }
  translatePageTexts();
  window.addEventListener("storage", () => {
    translatePageTexts();
  });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmFzdHJvIl0sInNvdXJjZXNDb250ZW50IjpbIi0tLVxuLy8gSW1wb3J0YXIgZWwgbGF5b3V0IHkgY29tcG9uZW50ZXNcbmltcG9ydCBNYWluTGF5b3V0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0L01haW5MYXlvdXQuYXN0cm8nO1xuaW1wb3J0IEFuaW1hbFRhYmxlIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvYW5pbWFscy9BbmltYWxUYWJsZSc7XG5pbXBvcnQgQW5pbWFsRmlsdGVycyBmcm9tICcuLi8uLi9jb21wb25lbnRzL2FuaW1hbHMvQW5pbWFsRmlsdGVycyc7XG5pbXBvcnQgYXV0aFNlcnZpY2UgZnJvbSAnLi4vLi4vc2VydmljZXMvYXV0aFNlcnZpY2UnO1xuaW1wb3J0IHsgZ2V0Q3VycmVudExhbmd1YWdlIH0gZnJvbSAnLi4vLi4vaTE4bi9jb25maWcnO1xuXG4vLyBPYnRlbmVyIGVsIGlkaW9tYSBhY3R1YWwgZW4gZWwgc2Vydmlkb3JcbmNvbnN0IGN1cnJlbnRMYW5nID0gZ2V0Q3VycmVudExhbmd1YWdlKCk7XG5cbi8vIFRyYWR1Y2Npb25lcyBkaXJlY3RhcyBlbiB2YXJpYWJsZXMgc2ltcGxlcyBwYXJhIGV2aXRhciBwcm9ibGVtYXMgZGUgaGlkcmF0YWNpw7NuXG5sZXQgcGFnZVRpdGxlID0gJ0dlc3Rpw7NuIGRlIEFuaW1hbGVzJztcbmxldCBuZXdBbmltYWxUZXh0ID0gJ051ZXZvIEFuaW1hbCc7XG5sZXQgcmVmcmVzaFRleHQgPSAnQWN0dWFsaXphcic7XG5sZXQgc2VhcmNoVGl0bGVUZXh0ID0gJ0LDunNxdWVkYSB5IEZpbHRyb3MnO1xubGV0IHNlYXJjaERlc2NyaXB0aW9uVGV4dCA9ICdVdGlsaXphIGxvcyBmaWx0cm9zIHBhcmEgZW5jb250cmFyIGFuaW1hbGVzIGVzcGVjw61maWNvcy4gUHVlZGVzIGZpbHRyYXIgcG9yIGV4cGxvdGFjacOzbiwgZ8OpbmVybywgZXN0YWRvIHkgbcOhcy4nO1xubGV0IGxpc3RUaXRsZVRleHQgPSAnTGlzdGFkbyBkZSBBbmltYWxlcyc7XG5sZXQgbG9hZGluZ1RleHQgPSAnQ2FyZ2FuZG8gYW5pbWFsZXMuLi4nO1xuXG4vLyBFc3RhYmxlY2VyIGxhcyB0cmFkdWNjaW9uZXMgYmFzYWRhcyBlbiBlbCBpZGlvbWFcbmlmIChjdXJyZW50TGFuZyA9PT0gJ2NhJykge1xuICBwYWdlVGl0bGUgPSAnR2VzdGnDsyBkXFwnQW5pbWFscyc7XG4gIG5ld0FuaW1hbFRleHQgPSAnTm91IEFuaW1hbCc7XG4gIHJlZnJlc2hUZXh0ID0gJ0FjdHVhbGl0emFyJztcbiAgc2VhcmNoVGl0bGVUZXh0ID0gJ0NlcmNhIGkgRmlsdHJlcyc7XG4gIHNlYXJjaERlc2NyaXB0aW9uVGV4dCA9ICdVdGlsaXR6YSBlbHMgZmlsdHJlcyBwZXIgdHJvYmFyIGFuaW1hbHMgZXNwZWPDrWZpY3MuIFBvdHMgZmlsdHJhciBwZXIgZXhwbG90YWNpw7MsIGfDqG5lcmUsIGVzdGF0IGkgbcOpcy4nO1xuICBsaXN0VGl0bGVUZXh0ID0gJ0xsaXN0YXQgZFxcJ0FuaW1hbHMnO1xuICBsb2FkaW5nVGV4dCA9ICdDYXJyZWdhbnQgYW5pbWFscy4uLic7XG59XG5cbi8vIENvbXByb2JhciBhdXRlbnRpY2FjacOzbiBwZXJvIHNpbiB2ZXJpZmljYXIgcGVybWlzb3NcbmNvbnN0IGlzTG9nZ2VkSW4gPSB0cnVlOyAvLyBGb3J6YW1vcyBhIHRydWUgZHVyYW50ZSBlbCBkZXNhcnJvbGxvXG4vLyBjb25zdCBpc0xvZ2dlZEluID0gaXNBdXRoZW50aWNhdGVkKCk7XG5cbi8vIENvbXByb2JhY2lvbmVzIHNpbXBsaWZpY2FkYXMgLSBzaWVtcHJlIHBlcm1pdGlyIHRvZG8gcGFyYSBkZXNhcnJvbGxvIHLDoXBpZG9cbmNvbnN0IGNhblZpZXdBbmltYWxzID0gdHJ1ZTtcbmNvbnN0IGNhbkVkaXRBbmltYWxzID0gdHJ1ZTtcbmNvbnN0IGNhbkNyZWF0ZUFuaW1hbHMgPSB0cnVlO1xuXG4vLyBFbiBtb2RvIGRlc2Fycm9sbG8sIG5vIHJlZGlyaWdpbW9zXG4vLyBpZiAoIWlzTG9nZ2VkSW4pIHtcbi8vICAgcmV0dXJuIEFzdHJvLnJlZGlyZWN0KCcvbG9naW4nKTtcbi8vIH1cblxuLy8gRGVmaW5pciB0w610dWxvIHkgcm9sIGRlIHVzdWFyaW9cbmNvbnN0IHRpdGxlID0gcGFnZVRpdGxlO1xuXG4vLyBObyBkZWZpbmltb3MgZWwgcm9sIGFxdcOtIHBhcmEgY29tcG9uZW50ZXMgc2VydmVyLXNpZGVcbi8vIEVsIHJvbCBzZSBkZXRlY3RhcsOhIGVuIGVsIGNsaWVudGUgY29uIEphdmFTY3JpcHRcbmNvbnN0IHVzZXJSb2xlID0gJ3BlbmRpbmcnOyAvLyBFc3RlIHZhbG9yIHNlcsOhIHJlZW1wbGF6YWRvIHBvciBKUyBkZWwgY2xpZW50ZVxuXG4tLS1cblxuPE1haW5MYXlvdXQgdGl0bGU9e3RpdGxlfSB1c2VyUm9sZT17dXNlclJvbGV9IGN1cnJlbnRQYXRoPVwiL2FuaW1hbHNcIj5cbiAgPGRpdiBjbGFzcz1cInctZnVsbCBtYXgtdy1mdWxsIHB4LTIgc206cHgtNCBweS00IHNtOnB5LTZcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LWNvbCBzbTpmbGV4LXJvdyBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgc206aXRlbXMtY2VudGVyIG1iLTQgc206bWItNiBnYXAtM1wiPlxuICAgICAgPGgxIGNsYXNzPVwidGV4dC14bCBzbTp0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtd2hpdGVcIj5cbiAgICAgICAge3RpdGxlfVxuICAgICAgPC9oMT5cbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMlwiPlxuICAgICAgICA8c2NyaXB0IGlzOmlubGluZT5cbiAgICAgICAgICAvLyBDb21wcm9iYXIgcm9sIGRlIHVzdWFyaW8gZGlyZWN0YW1lbnRlIGFxdcOtXG4gICAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcbiAgICAgICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoYXRvYih0b2tlbi5zcGxpdCgnLicpWzFdKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9IHBheWxvYWQucm9sZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZhcmlhYmxlIGdsb2JhbCBwYXJhIHF1ZSBvdHJvcyBzY3JpcHRzIHNlcGFuIHF1ZSB5YSBlc3TDoSBibG9xdWVhZG9cbiAgICAgICAgICAgICAgICB3aW5kb3cubmV3QW5pbWFsQnV0dG9uQmxvY2tlZCA9IChyb2xlID09PSAnZWRpdG9yJyB8fCByb2xlID09PSAndXN1YXJpbycpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIHNlIGVqZWN1dGEgbXV5IHLDoXBpZG8sIGVzcGVyYXIgdW4gdGljayBwYXJhIGFzZWd1cmFyIHF1ZSBlbCBET00gZXN0w6kgbGlzdG9cbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lm5ld0FuaW1hbEJ1dHRvbkJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQkxPUVVFQU5ETyBCT1TDk04gTlVFVk8gQU5JTUFMIElOTUVESUFUQU1FTlRFIFBBUkEgUk9MOicsIHJvbGUpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctYW5pbWFsLWJ0bicpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChidG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50aXRsZSA9ICdOTyBUSUVORVMgUEVSTUlTT1MgUEFSQSBDUkVBUiBOVUVWT1MgQU5JTUFMRVMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBw7FhZGlyIGljb25vIGRlIGNhbmRhZG9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYnRuLnF1ZXJ5U2VsZWN0b3IoJy5sb2NrLWljb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NrSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbG9ja0ljb24udGV4dENvbnRlbnQgPSAnIPCflJInO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrSWNvbi5jbGFzc05hbWUgPSAnbWwtMSBsb2NrLWljb24nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uYXBwZW5kQ2hpbGQobG9ja0ljb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW5pciBuYXZlZ2FjacOzblxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ05PIFRJRU5FUyBQRVJNSVNPUyBQQVJBIENSRUFSIE5VRVZPUyBBTklNQUxFUycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgdmVyaWZpY2FyIHBlcm1pc29zIHBhcmEgYm90w7NuIE51ZXZvIEFuaW1hbDonLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpO1xuICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgXG4gICAgICAgIHsvKiBCb3TDs24gc2VuY2lsbG8gLSBzZSBibG9xdWVhcsOhIHBvciBlbCBzY3JpcHQgYW50ZXJpb3Igc2kgZWwgcm9sIGVzIHJlc3RyaW5naWRvICovfVxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBmbGV4IGl0ZW1zLWNlbnRlclwiIFxuICAgICAgICAgICBpZD1cIm5ldy1hbmltYWwtYnRuXCJcbiAgICAgICAgICAgb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5ocmVmPScvYW5pbWFscy9uZXcnO1wiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXItMVwiPis8L3NwYW4+XG4gICAgICAgICAge25ld0FuaW1hbFRleHR9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8IS0tIFlhIG5vIHVzYW1vcyBzY3JpcHRzIGVuIGzDrW5lYSBhcXXDrSAtIHRvZG8gc2UgbWFuZWphIGRlc2RlIGJsb2NrLWRlbGV0ZS1idXR0b24uanMgLS0+XG4gICAgICAgIDxidXR0b24gaWQ9XCJyZWZyZXNoQnRuXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeSBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXItMVwiPuKGuzwvc3Bhbj5cbiAgICAgICAgICB7cmVmcmVzaFRleHR9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8IS0tIENhcmQgZGUgYsO6c3F1ZWRhIHkgZmlsdHJvcyAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiYmctd2hpdGUgZGFyazpiZy1ncmF5LTgwMCByb3VuZGVkLWxnIHNoYWRvdy1tZCBwLTMgc206cC00IG1iLTQgc206bWItNlwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1iLTMgc206bWItNFwiPlxuICAgICAgICA8aDIgY2xhc3M9XCJ0ZXh0LWJhc2Ugc206dGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBtYi0yIHNtOm1iLTNcIj5cbiAgICAgICAgICB7c2VhcmNoVGl0bGVUZXh0fVxuICAgICAgICA8L2gyPlxuICAgICAgICA8cCBjbGFzcz1cInRleHQteHMgc206dGV4dC1zbSB0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTMwMCBtYi0zIHNtOm1iLTRcIj5cbiAgICAgICAgICB7c2VhcmNoRGVzY3JpcHRpb25UZXh0fVxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPCEtLSBDb21wb25lbnRlIGRlIGZpbHRyb3MgLS0+XG4gICAgICA8QW5pbWFsRmlsdGVycyBpZD1cImFuaW1hbC1maWx0ZXJzXCIgY2xpZW50OmxvYWQgLz5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gVGFibGEgZGUgYW5pbWFsZXMgLS0+XG4gICAgPGRpdiBjbGFzcz1cImJnLXdoaXRlIGRhcms6YmctZ3JheS04MDAgcm91bmRlZC1sZyBzaGFkb3ctbWQgcC0zIHNtOnAtNFwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1iLTMgc206bWItNCBmbGV4IGZsZXgtY29sIHNtOmZsZXgtcm93IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBzbTppdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgPGgyIGNsYXNzPVwidGV4dC1iYXNlIHNtOnRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtd2hpdGUgbWItMiBzbTptYi0wXCI+XG4gICAgICAgICAge2xpc3RUaXRsZVRleHR9XG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxkaXYgaWQ9XCJ0b3RhbEFuaW1hbHNDb250YWluZXJcIiBjbGFzcz1cInRleHQteHMgc206dGV4dC1zbSB0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgIHtsb2FkaW5nVGV4dH1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJvdmVyZmxvdy14LWF1dG9cIj5cbiAgICAgICAgPEFuaW1hbFRhYmxlIFxuICAgICAgICAgIGNsaWVudDpsb2FkIFxuICAgICAgICAgIGNhbkVkaXQ9e2NhbkVkaXRBbmltYWxzfVxuICAgICAgICAgIGNhbkNyZWF0ZT17Y2FuQ3JlYXRlQW5pbWFsc31cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPCEtLSBTT0xVQ0nDk04gUkFESUNBTDogSW50ZXJjZXB0b3IgZ2xvYmFsIGRlIGNsaWNzIC0tPlxuICA8c2NyaXB0IGlzOmlubGluZT5cbiAgICAvLyBFc3RhIGZ1bmNpw7NuIHNlIGVqZWN1dGEgSU5NRURJQVRBTUVOVEUgYWwgY2FyZ2FyIGVsIHNjcmlwdFxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJTlRFUkNFUFRPUiBHTE9CQUwgSU5JQ0lBRE8nKTtcbiAgICAgIFxuICAgICAgLy8gT2J0ZW5lciBlbCByb2wgZGVsIHVzdWFyaW8gKHVuYSBzb2xhIHZleiBhbCBpbmljaW8pXG4gICAgICBsZXQgdXNlclJvbGVHbG9iYWwgPSAncGVuZGluZyc7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnBhcnNlKGF0b2IodG9rZW4uc3BsaXQoJy4nKVsxXSkpO1xuICAgICAgICAgIHVzZXJSb2xlR2xvYmFsID0gKHBheWxvYWQucm9sZSB8fCAnZ3Vlc3QnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdST0wgR0xPQkFMIERFVEVDVEFETzonLCB1c2VyUm9sZUdsb2JhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb2J0ZW5pZW5kbyByb2wgZ2xvYmFsOicsIGUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJbnRlcmNlcHRhciBUT0RPUyBsb3MgY2xpY3MgZW4gZWwgZG9jdW1lbnRvXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIC8vIFNvbG8gcHJvY2VzYXIgcGFyYSByb2xlcyByZXN0cmluZ2lkb3NcbiAgICAgICAgaWYgKHVzZXJSb2xlR2xvYmFsICE9PSAnZWRpdG9yJyAmJiB1c2VyUm9sZUdsb2JhbCAhPT0gJ3VzdWFyaW8nKSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBQZXJtaXRpciBjbGljcyBwYXJhIGFkbWluaXN0cmFkb3JlcyB5IFJhbW9uXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBjbGljIGVzIGVuIHVuIGVubGFjZSBhIC9hbmltYWxzL25ld1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgZWwgY2xpYyBlcyBlbiB1biBzcGFuIGRlbnRybyBkZWwgZW5sYWNlLCBidXNjYXIgZWwgZW5sYWNlIHBhZHJlXG4gICAgICAgIHdoaWxlICh0YXJnZXQgJiYgdGFyZ2V0LnRhZ05hbWUgIT09ICdBJykge1xuICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTaSBlbmNvbnRyYW1vcyB1biBlbmxhY2UgeSB2YSBhIC9hbmltYWxzL25ldywgYmxvcXVlYXJsb1xuICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC50YWdOYW1lID09PSAnQScgJiYgXG4gICAgICAgICAgICAodGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpID09PSAnL2FuaW1hbHMvbmV3JyB8fCBcbiAgICAgICAgICAgICB0YXJnZXQudGV4dENvbnRlbnQuaW5jbHVkZXMoJ051ZXZvIEFuaW1hbCcpIHx8IFxuICAgICAgICAgICAgIHRhcmdldC50ZXh0Q29udGVudC5pbmNsdWRlcygnTm91IEFuaW1hbCcpKSkge1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCfCoUlOVEVSQ0VQVEFETyBDTElDIEVOIEJPVMOTTiBOVUVWTyBBTklNQUwhJyk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNb3N0cmFyIGFsZXJ0YVxuICAgICAgICAgIGFsZXJ0KCdOTyBUSUVORVMgUEVSTUlTT1MgUEFSQSBDUkVBUiBOVUVWT1MgQU5JTUFMRVMnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUYW1iacOpbiBpbnRlbnRhciBibG9xdWVhciB2aXN1YWxtZW50ZSBlbCBib3TDs25cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGFyZ2V0LmhyZWYgPSAnamF2YXNjcmlwdDp2b2lkKDApOyc7XG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQcOxYWRpciBjYW5kYWRvIHNpIG5vIGV4aXN0ZVxuICAgICAgICAgICAgaWYgKCF0YXJnZXQucXVlcnlTZWxlY3RvcignLmxvY2staWNvbicpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxvY2tJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICBsb2NrSWNvbi50ZXh0Q29udGVudCA9ICcg8J+Ukic7XG4gICAgICAgICAgICAgIGxvY2tJY29uLmNsYXNzTmFtZSA9ICdtbC0xIGxvY2staWNvbic7XG4gICAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChsb2NrSWNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbW9kaWZpY2FuZG8gYm90w7NuOicsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0sIHRydWUpOyAvLyBVc2FyIGZhc2UgZGUgY2FwdHVyYSBwYXJhIGludGVyY2VwdGFyIGFudGVzIGRlIG90cm9zIGhhbmRsZXJzXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdJTlRFUkNFUFRPUiBHTE9CQUwgQUNUSVZBRE8gRVhJVE9TQU1FTlRFJyk7XG4gICAgfSkoKTtcbiAgPC9zY3JpcHQ+XG48L01haW5MYXlvdXQ+XG5cbjxzdHlsZT5cbiAgLmJ0biB7XG4gICAgQGFwcGx5IHB4LTMgcHktMiBzbTpweC00IHNtOnB5LTIgcm91bmRlZC1tZCB0ZXh0LXhzIHNtOnRleHQtc20gZm9udC1tZWRpdW0gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIHRyYW5zaXRpb24tY29sb3JzO1xuICB9XG4gIFxuICAuYnRuLXByaW1hcnkge1xuICAgIEBhcHBseSBiZy1wcmltYXJ5IHRleHQtd2hpdGUgaG92ZXI6YmctcHJpbWFyeS84MCBmb2N1czpyaW5nLXByaW1hcnk7XG4gIH1cbiAgXG4gIC5idG4tc2Vjb25kYXJ5IHtcbiAgICBAYXBwbHkgYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBob3ZlcjpiZy1ncmF5LTMwMCBmb2N1czpyaW5nLWdyYXktNTAwIGRhcms6YmctZ3JheS03MDAgZGFyazp0ZXh0LWdyYXktMjAwIGRhcms6aG92ZXI6YmctZ3JheS02MDA7XG4gIH1cbjwvc3R5bGU+XG5cbjxzY3JpcHQ+XG4gIC8vIFNjcmlwdCBwYXJhIG1hbmVqYXIgaW50ZXJhY2Npb25lcyBkZSBsYSBww6FnaW5hXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgLy8gRWxlbWVudG9zIGRlbCBET01cbiAgICBjb25zdCByZWZyZXNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZnJlc2hCdG4nKTtcbiAgICBjb25zdCB0b3RhbEFuaW1hbHNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG90YWxBbmltYWxzQ29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gVm9sdmVyIGEgY2FyZ2FyIGxhIHDDoWdpbmEgY3VhbmRvIHNlIHB1bHNlIGVsIGJvdMOzbiBkZSBhY3R1YWxpemFyXG4gICAgaWYgKHJlZnJlc2hCdG4pIHtcbiAgICAgIHJlZnJlc2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBFc2N1Y2hhciBldmVudG9zIGRlIGxhIHRhYmxhIGRlIGFuaW1hbGVzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWFscy1sb2FkZWQnLCAoZSkgPT4ge1xuICAgICAgaWYgKHRvdGFsQW5pbWFsc0NvbnRhaW5lciAmJiBlLmRldGFpbCAmJiBlLmRldGFpbC50b3RhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIE9idGVuZXIgaWRpb21hIGFjdHVhbFxuICAgICAgICBjb25zdCBjdXJyZW50TGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyTGFuZ3VhZ2UnKSB8fCAnZXMnO1xuICAgICAgICBjb25zdCBhbmltYWxlc1RleHQgPSBjdXJyZW50TGFuZyA9PT0gJ2NhJyA/ICdhbmltYWxzJyA6ICdhbmltYWxlcyc7XG4gICAgICAgIFxuICAgICAgICB0b3RhbEFuaW1hbHNDb250YWluZXIuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgIFRvdGFsOiAke2UuZGV0YWlsLnRvdGFsfSAke2FuaW1hbGVzVGV4dH0gXG4gICAgICAgIDwvc3Bhbj5gO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFjdHVhbGl6YXIgZWwgdMOtdHVsbyBjdWFuZG8gc2UgYXBsaXF1ZW4gZmlsdHJvc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZpbHRlcnMtYXBwbGllZCcsIChlKSA9PiB7XG4gICAgICBpZiAodG90YWxBbmltYWxzQ29udGFpbmVyKSB7XG4gICAgICAgIC8vIE9idGVuZXIgaWRpb21hIGFjdHVhbFxuICAgICAgICBjb25zdCBjdXJyZW50TGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyTGFuZ3VhZ2UnKSB8fCAnZXMnO1xuICAgICAgICBjb25zdCBmaWx0cm9zVGV4dCA9IGN1cnJlbnRMYW5nID09PSAnY2EnID8gJ0FwbGljYW50IGZpbHRyZXMuLi4nIDogJ0FwbGljYW5kbyBmaWx0cm9zLi4uJztcbiAgICAgICAgXG4gICAgICAgIHRvdGFsQW5pbWFsc0NvbnRhaW5lci5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCI+XG4gICAgICAgICAgJHtmaWx0cm9zVGV4dH1cbiAgICAgICAgPC9zcGFuPmA7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gVFJBRFVDQ0nDk04gRElSRUNUQSBERSBMT1MgVEVYVE9TIEZJSk9TIC0gTlVFVk9cbiAgICBmdW5jdGlvbiB0cmFuc2xhdGVQYWdlVGV4dHMoKSB7XG4gICAgICBjb25zdCBjdXJyZW50TGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyTGFuZ3VhZ2UnKSB8fCAnZXMnO1xuICAgICAgaWYgKGN1cnJlbnRMYW5nID09PSAnY2EnKSB7XG4gICAgICAgIC8vIFRyYWR1Y2lyIHTDrXR1bG8gcHJpbmNpcGFsXG4gICAgICAgIGNvbnN0IG1haW5UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFzdHJvLXNvdXJjZS1sb2M9XCI1Njo3OVwiXScpO1xuICAgICAgICBpZiAobWFpblRpdGxlKSBtYWluVGl0bGUudGV4dENvbnRlbnQgPSAnR2VzdGnDsyBkXFwnQW5pbWFscyc7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFkdWNpciBib3TDs24gbnVldm8gYW5pbWFsIHkgYXBsaWNhciByZXN0cmljY2lvbmVzIHNlZ8O6biByb2xcbiAgICAgICAgY29uc3QgbmV3QW5pbWFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYVtocmVmPVwiL2FuaW1hbHMvbmV3XCJdJyk7XG4gICAgICAgIGlmIChuZXdBbmltYWxCdG4pIHtcbiAgICAgICAgICAvLyBPYnRlbmVyIHJvbCBkZWwgdXN1YXJpb1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgICAgICAgbGV0IHVzZXJSb2xlID0gJ2d1ZXN0JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnBhcnNlKGF0b2IodG9rZW4uc3BsaXQoJy4nKVsxXSkpO1xuICAgICAgICAgICAgICB1c2VyUm9sZSA9IChwYXlsb2FkLnJvbGUgfHwgJ2d1ZXN0JykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JvbCBkZXRlY3RhZG8gZW4gc2NyaXB0IHRyYWR1Y2Npw7NuOicsIHVzZXJSb2xlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2kgZXMgcm9sIHJlc3RyaW5naWRvLCBkZXNoYWJpbGl0YXIgZWwgYm90w7NuXG4gICAgICAgICAgICBpZiAodXNlclJvbGUgPT09ICdlZGl0b3InIHx8IHVzZXJSb2xlID09PSAndXN1YXJpbycpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0JMT1FVRUFORE8gQk9Uw5NOIEVOIFNDUklQVCBERSBUUkFEVUNDScOTTicpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQXBsaWNhciBlc3RyaWN0YW1lbnRlIGJsb3F1ZW9cbiAgICAgICAgICAgICAgbmV3QW5pbWFsQnRuLmhyZWYgPSAnamF2YXNjcmlwdDp2b2lkKDApOyc7XG4gICAgICAgICAgICAgIG5ld0FuaW1hbEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgIG5ld0FuaW1hbEJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgIG5ld0FuaW1hbEJ0bi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgICAgICAgICAgIG5ld0FuaW1hbEJ0bi5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICAgICAgICBuZXdBbmltYWxCdG4uc3R5bGUuY3Vyc29yID0gJ25vdC1hbGxvd2VkJztcbiAgICAgICAgICAgICAgbmV3QW5pbWFsQnRuLnRpdGxlID0gJ05PIFRJRU5FUyBQRVJNSVNPUyBQQVJBIENSRUFSIE5VRVZPUyBBTklNQUxFUyc7XG4gICAgICAgICAgICAgIG5ld0FuaW1hbEJ0bi5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LTUwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSWNvbm8gY2FuZGFkb1xuICAgICAgICAgICAgICBpZiAoIW5ld0FuaW1hbEJ0bi5xdWVyeVNlbGVjdG9yKCcubG9jay1pY29uJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NrSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICBsb2NrSWNvbi50ZXh0Q29udGVudCA9ICcg8J+Ukic7XG4gICAgICAgICAgICAgICAgbG9ja0ljb24uY2xhc3NOYW1lID0gJ21sLTEgbG9jay1pY29uJztcbiAgICAgICAgICAgICAgICBuZXdBbmltYWxCdG4uYXBwZW5kQ2hpbGQobG9ja0ljb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBNYW5lamFkb3IgY2xpY2tcbiAgICAgICAgICAgICAgbmV3QW5pbWFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdOTyBUSUVORVMgUEVSTUlTT1MgUEFSQSBDUkVBUiBOVUVWT1MgQU5JTUFMRVMnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFwbGljYW5kbyByZXN0cmljY2lvbmVzIGVuIHRyYWR1Y2Npw7NuOicsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcmFkdWNpciBlbCB0ZXh0byAoaW5kZXBlbmRpZW50ZW1lbnRlIGRlbCByb2wpXG4gICAgICAgICAgY29uc3Qgc3BhblBsdXMgPSBuZXdBbmltYWxCdG4ucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICAgIGlmIChzcGFuUGx1cyAmJiBzcGFuUGx1cy5uZXh0U2libGluZykge1xuICAgICAgICAgICAgc3BhblBsdXMubmV4dFNpYmxpbmcudGV4dENvbnRlbnQgPSAnIE5vdSBBbmltYWwnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVHJhZHVjaXIgYm90w7NuIGFjdHVhbGl6YXJcbiAgICAgICAgY29uc3QgcmVmcmVzaEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWZyZXNoQnRuJyk7XG4gICAgICAgIGlmIChyZWZyZXNoQnRuKSB7XG4gICAgICAgICAgLy8gTWFudGVuZXIgZWwgaWNvbm8gcGVybyBjYW1iaWFyIGVsIHRleHRvXG4gICAgICAgICAgY29uc3Qgc3BhblJlZnJlc2ggPSByZWZyZXNoQnRuLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgICBpZiAoc3BhblJlZnJlc2ggJiYgc3BhblJlZnJlc2gubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgIHNwYW5SZWZyZXNoLm5leHRTaWJsaW5nLnRleHRDb250ZW50ID0gJyBBY3R1YWxpdHphcic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFkdWNpciBlbmNhYmV6YWRvIGRlIGLDunNxdWVkYVxuICAgICAgICBjb25zdCBzZWFyY2hIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hc3Ryby1zb3VyY2UtbG9jPVwiNzQ6OTdcIl0nKTtcbiAgICAgICAgaWYgKHNlYXJjaEhlYWRlcikgc2VhcmNoSGVhZGVyLnRleHRDb250ZW50ID0gJ0NlcmNhIGkgRmlsdHJlcyc7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFkdWNpciBkZXNjcmlwY2nDs24gZGUgYsO6c3F1ZWRhXG4gICAgICAgIGNvbnN0IHNlYXJjaERlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hc3Ryby1zb3VyY2UtbG9jPVwiNzc6ODVcIl0nKTtcbiAgICAgICAgaWYgKHNlYXJjaERlc2MpIHNlYXJjaERlc2MudGV4dENvbnRlbnQgPSAnVXRpbGl0emEgZWxzIGZpbHRyZXMgcGVyIHRyb2JhciBhbmltYWxzIGVzcGVjw61maWNzLiBQb3RzIGZpbHRyYXIgcGVyIGV4cGxvdGFjacOzLCBnw6huZXJlLCBlc3RhdCBpIG3DqXMuJztcbiAgICAgICAgXG4gICAgICAgIC8vIFRyYWR1Y2lyIGVuY2FiZXphZG8gZGUgbGlzdGFkb1xuICAgICAgICBjb25zdCBsaXN0SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYXN0cm8tc291cmNlLWxvYz1cIjkzOjk3XCJdJyk7XG4gICAgICAgIGlmIChsaXN0SGVhZGVyKSBsaXN0SGVhZGVyLnRleHRDb250ZW50ID0gJ0xsaXN0YXQgZFxcJ0FuaW1hbHMnO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBFamVjdXRhciB0cmFkdWNjacOzbiBhbCBjYXJnYXIgbGEgcMOhZ2luYVxuICAgIHRyYW5zbGF0ZVBhZ2VUZXh0cygpO1xuICAgIFxuICAgIC8vIEVzY3VjaGFyIGNhbWJpb3MgZW4gZWwgaWRpb21hIChwYXJhIGN1YW5kbyBzZSBjYW1iaWEgc2luIHJlY2FyZ2FyKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgKCkgPT4ge1xuICAgICAgdHJhbnNsYXRlUGFnZVRleHRzKCk7XG4gICAgfSk7XG4gIH0pO1xuPC9zY3JpcHQ+Il0sIm1hcHBpbmdzIjoiQUE2UEUsU0FBUyxpQkFBaUIsb0JBQW9CLE1BQU07QUFFbEQsUUFBTSxhQUFhLFNBQVMsZUFBZSxZQUFZO0FBQ3ZELFFBQU0sd0JBQXdCLFNBQVMsZUFBZSx1QkFBdUI7QUFHN0UsTUFBSSxZQUFZO0FBQ2QsZUFBVyxpQkFBaUIsU0FBUyxNQUFNO0FBQ3pDLGFBQU8sU0FBUyxPQUFPO0lBQ3pCLENBQUM7RUFDSDtBQUdBLFdBQVMsaUJBQWlCLGtCQUFrQixDQUFDLE1BQU07QUFDakQsUUFBSSx5QkFBeUIsRUFBRSxVQUFVLEVBQUUsT0FBTyxVQUFVLFFBQVc7QUFFckUsWUFBTSxjQUFjLGFBQWEsUUFBUSxjQUFjLEtBQUs7QUFDNUQsWUFBTSxlQUFlLGdCQUFnQixPQUFPLFlBQVk7QUFFeEQsNEJBQXNCLFlBQVk7bUJBQ3ZCLEVBQUUsT0FBTyxLQUFLLElBQUksWUFBWTs7SUFFM0M7RUFDRixDQUFDO0FBR0QsV0FBUyxpQkFBaUIsbUJBQW1CLENBQUMsTUFBTTtBQUNsRCxRQUFJLHVCQUF1QjtBQUV6QixZQUFNLGNBQWMsYUFBYSxRQUFRLGNBQWMsS0FBSztBQUM1RCxZQUFNLGNBQWMsZ0JBQWdCLE9BQU8sd0JBQXdCO0FBRW5FLDRCQUFzQixZQUFZO1lBQzlCLFdBQVc7O0lBRWpCO0VBQ0YsQ0FBQztBQUdELFdBQVMscUJBQXFCO0FBQzVCLFVBQU0sY0FBYyxhQUFhLFFBQVEsY0FBYyxLQUFLO0FBQzVELFFBQUksZ0JBQWdCLE1BQU07QUFFeEIsWUFBTSxZQUFZLFNBQVMsY0FBYyxpQ0FBaUM7QUFDMUUsVUFBSSxVQUFXLFdBQVUsY0FBYztBQUd2QyxZQUFNLGVBQWUsU0FBUyxjQUFjLHdCQUF3QjtBQUNwRSxVQUFJLGNBQWM7QUFFaEIsWUFBSTtBQUNGLGdCQUFNLFFBQVEsYUFBYSxRQUFRLE9BQU87QUFDMUMsY0FBSSxXQUFXO0FBRWYsY0FBSSxPQUFPO0FBQ1Qsa0JBQU0sVUFBVSxLQUFLLE1BQU0sS0FBSyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3BELHdCQUFZLFFBQVEsUUFBUSxTQUFTLFlBQVk7QUFDakQsb0JBQVEsSUFBSSx1Q0FBcUMsUUFBUztVQUM1RDtBQUdBLGNBQUksYUFBYSxZQUFZLGFBQWEsV0FBVztBQUNuRCxvQkFBUSxJQUFJLDBDQUF3QztBQUdwRCx5QkFBYSxPQUFPO0FBQ3BCLHlCQUFhLFdBQVc7QUFDeEIseUJBQWEsYUFBYSxZQUFZLFVBQVU7QUFDaEQseUJBQWEsTUFBTSxVQUFVO0FBQzdCLHlCQUFhLE1BQU0sZ0JBQWdCO0FBQ25DLHlCQUFhLE1BQU0sU0FBUztBQUM1Qix5QkFBYSxRQUFRO0FBQ3JCLHlCQUFhLFVBQVUsSUFBSSxjQUFjLG9CQUFvQjtBQUc3RCxnQkFBSSxDQUFDLGFBQWEsY0FBYyxZQUFZLEdBQUc7QUFDN0Msb0JBQU0sV0FBVyxTQUFTLGNBQWMsTUFBTTtBQUM5Qyx1QkFBUyxjQUFjO0FBQ3ZCLHVCQUFTLFlBQVk7QUFDckIsMkJBQWEsWUFBWSxRQUFRO1lBQ25DO0FBR0EseUJBQWEsaUJBQWlCLFNBQVMsU0FBUyxHQUFHO0FBQ2pELGdCQUFFLGVBQWU7QUFDakIsZ0JBQUUsZ0JBQWdCO0FBQ2xCLG9CQUFNLCtDQUErQztBQUNyRCxxQkFBTztZQUNULENBQUM7VUFDSDtRQUNGLFNBQVMsR0FBRztBQUNWLGtCQUFRLE1BQU0sZ0RBQThDLENBQUU7UUFDaEU7QUFHQSxjQUFNLFdBQVcsYUFBYSxjQUFjLE1BQU07QUFDbEQsWUFBSSxZQUFZLFNBQVMsYUFBYTtBQUNwQyxtQkFBUyxZQUFZLGNBQWM7UUFDckM7TUFDRjtBQUdBLFlBQU1BLGNBQWEsU0FBUyxlQUFlLFlBQVk7QUFDdkQsVUFBSUEsYUFBWTtBQUVkLGNBQU0sY0FBY0EsWUFBVyxjQUFjLE1BQU07QUFDbkQsWUFBSSxlQUFlLFlBQVksYUFBYTtBQUMxQyxzQkFBWSxZQUFZLGNBQWM7UUFDeEM7TUFDRjtBQUdBLFlBQU0sZUFBZSxTQUFTLGNBQWMsaUNBQWlDO0FBQzdFLFVBQUksYUFBYyxjQUFhLGNBQWM7QUFHN0MsWUFBTSxhQUFhLFNBQVMsY0FBYyxpQ0FBaUM7QUFDM0UsVUFBSSxXQUFZLFlBQVcsY0FBYztBQUd6QyxZQUFNLGFBQWEsU0FBUyxjQUFjLGlDQUFpQztBQUMzRSxVQUFJLFdBQVksWUFBVyxjQUFjO0lBQzNDO0VBQ0Y7QUFHQSxxQkFBbUI7QUFHbkIsU0FBTyxpQkFBaUIsV0FBVyxNQUFNO0FBQ3ZDLHVCQUFtQjtFQUNyQixDQUFDO0FBQ0gsQ0FBQzsiLCJuYW1lcyI6WyJyZWZyZXNoQnRuIl19