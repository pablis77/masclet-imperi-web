import{r as i,a as e}from"./vendor.BAk4NxX6.js";const h={async resetDatabase(){try{const r="http://localhost:8000",t={"Content-Type":"application/json",Authorization:"Bearer test_token_for_development"},s=await fetch(`${r}/api/v1/reset-database`,{method:"POST",headers:t});if(s.ok){const a=await s.json();return console.log("Base de datos reiniciada con √©xito:",a),{success:!0,message:"Base de datos reiniciada con √©xito"}}const o=await s.text();return console.error("Error al reiniciar la base de datos:",{status:s.status,statusText:s.statusText,error:o}),{success:!1,message:`Error al reiniciar la base de datos: ${s.status} ${s.statusText}`}}catch(r){return console.error("Error general al reiniciar la base de datos:",r),{success:!1,message:r.message||"Error desconocido al reiniciar la base de datos"}}}},p=()=>{const[r,t]=i.useState(!1),[s,o]=i.useState(!1),[a,l]=i.useState(!1),[n,c]=i.useState(null),u=()=>{t(!0),c(null)},x=()=>{o(!0)},m=()=>{t(!1),o(!1)},b=async()=>{l(!0);try{const d=await h.resetDatabase();if(c(d),d.success){setTimeout(()=>{t(!1),o(!1)},3e3);const g=new CustomEvent("database-reset",{detail:d});document.dispatchEvent(g)}}catch(d){c({success:!1,message:d.message||"Error desconocido al resetear la base de datos"})}finally{l(!1)}};return e.jsxs("div",{className:"reset-database-container",children:[!r&&e.jsxs("button",{onClick:u,className:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-md transition-colors duration-200",title:"Esta acci√≥n borrar√° TODOS los datos",children:[e.jsx("span",{className:"mr-2",children:"üóëÔ∏è"}),e.jsx("span",{children:"Resetear Base de Datos"})]}),r&&!s&&e.jsxs("div",{className:"confirmation-dialog bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-red-700 dark:text-red-300 font-medium mb-2",children:"¬øEst√°s seguro?"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-200 mb-4",children:"Esta acci√≥n eliminar√° TODOS los datos de la base de datos. Esta operaci√≥n no se puede deshacer."}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-md transition-colors duration-200",disabled:a,children:"S√≠, continuar"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors duration-200",disabled:a,children:"Cancelar"})]})]}),r&&s&&e.jsxs("div",{className:"confirmation-dialog bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-red-700 dark:text-red-300 font-medium mb-2",children:"¬°√öLTIMA ADVERTENCIA!"}),e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-200 mb-4",children:[e.jsx("strong",{children:"¬øEst√°s ABSOLUTAMENTE seguro?"})," Todos los animales, partos y registros hist√≥ricos ser√°n eliminados permanentemente."]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:b,className:`px-4 py-2 text-white font-medium rounded-md transition-colors duration-200 ${a?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,disabled:a,children:a?"Procesando...":"S√≠, RESETEAR TODO"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors duration-200",disabled:a,children:"Cancelar"})]})]}),n&&e.jsx("div",{className:`mt-3 p-3 rounded-md ${n.success?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:e.jsx("p",{className:`text-sm font-medium ${n.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:n.message})})]})};export{p as default};
