<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Aplicaci√≥n de Gesti√≥n Ganadera Masclet Imperi">
  <title>Masclet Imperi</title>
  <!-- Favicon -->
  <link rel="shortcut icon" href="/favico.ico" type="image/x-icon">
  <!-- CSS Cr√≠tico -->
  
  
  <!-- CSS por secci√≥n -->
  <!-- MARCADOR: CSS SECCIONES -->
</head>
<body>
  <div id="app">
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <p class="loading-text">Cargando aplicaci√≥n...</p>
      <noscript>
        <p class="error-message">Esta aplicaci√≥n requiere JavaScript para funcionar. Por favor, habil√≠talo en tu navegador.</p>
      </noscript>
    </div>
  </div>
  
  <!-- Scripts cr√≠ticos -->
  <!-- No se encontraron scripts JS -->
  
  <!-- Scripts por secci√≥n (carga din√°mica) -->
  <script>
  // Assets organizados por secci√≥n
  const SECTION_ASSETS = {
  "core": {
    "js": [
      "/_astro/vendor.BAk4NxX6.js",
      "/_astro/apiConfig.BYL0hBvc.js",
      "/_astro/apiConfigAdapter.B0N4Zv2p.js",
      "/_astro/config.DUTcyYPh.js",
      "/_astro/apiConfig.BYL0hBvc.js",
      "/_astro/apiConfigAdapter.B0N4Zv2p.js",
      "/_astro/apiService.DCRZ96ES.js",
      "/_astro/authService.CvC7CJU-.js",
      "/_astro/client.DKNAXmG2.js"
    ],
    "css": [
      "/_astro/vendor.DJv9yYup.css",
      "/_astro/index.DJoSdzOi.css"
    ]
  },
  "current": {
    "js": [
      "/_astro/Dashboard2.CHYKY2KF.js",
      "/_astro/DashboardNew.CHYKY2KF.js",
      "/_astro/DashboardV2.D3-bt97t.js",
      "/_astro/NotificationsMenu._4m-Nx7C.js",
      "/_astro/notificationService.DETo-XEc.js"
    ],
    "css": []
  },
  "other": {
    "js": [
      "/_astro/AnimalFilters.BavX2u2F.js",
      "/_astro/AnimalForm.DLmlRJVi.js",
      "/_astro/AnimalTable.DwggHQYQ.js",
      "/_astro/AuthMiddleware.CgZXvxDX.js",
      "/_astro/ClearLocalStorage.i7bUfcoq.js"
    ],
    "css": []
  }
};
  
  // Ruta base para los assets
  const BASE_PATH = '_astro';
  
  // Funci√≥n para cargar un script din√°micamente
  function loadScript(src) {
    return new Promise((resolve, reject) => {
      const script = document.createElement('script');
      script.src = src;
      script.type = 'module';
      script.onload = resolve;
      script.onerror = reject;
      document.body.appendChild(script);
    });
  }
  
  // Funci√≥n para cargar un CSS din√°micamente
  function loadCSS(href) {
    return new Promise((resolve) => {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = href;
      link.onload = resolve;
      document.head.appendChild(link);
    });
  }
  
  // Funci√≥n para cargar assets de una secci√≥n espec√≠fica
  async function loadSectionAssets(sectionName) {
    if (!SECTION_ASSETS[sectionName]) {
      console.warn('‚ö†Ô∏è Secci√≥n no encontrada:', sectionName);
      return;
    }
    
    const section = SECTION_ASSETS[sectionName];
    
    // Cargar CSS
    if (section.css && section.css.length > 0) {
      for (const cssFile of section.css) {
        await loadCSS('/' + BASE_PATH + '/' + cssFile);
        console.log('‚úÖ CSS cargado:', cssFile);
      }
    }
    
    // Cargar JS
    if (section.js && section.js.length > 0) {
      for (const jsFile of section.js) {
        await loadScript('/' + BASE_PATH + '/' + jsFile);
        console.log('‚úÖ Script cargado:', jsFile);
      }
    }
  }
  
  // Detectar secci√≥n actual basado en la ruta
  function detectCurrentSection() {
    const path = window.location.pathname;
    
    if (path.includes('/login')) {
      return 'LOGIN';
    } else if (path.includes('/explotacion')) {
      return 'EXPLOTACIONES';
    } else if (path.includes('/animal')) {
      return 'ANIMALES';
    } else if (path.includes('/listado')) {
      return 'LISTADOS';
    } else if (path.includes('/user')) {
      return 'USUARIOS';
    } else if (path.includes('/import')) {
      return 'IMPORTACION';
    } else if (path.includes('/backup')) {
      return 'BACKUPS';
    } else {
      // Por defecto cargar dashboard
      return 'DASHBOARD';
    }
  }
  
  // Cargar assets de la secci√≥n actual
  document.addEventListener('DOMContentLoaded', async () => {
    try {
      const currentSection = detectCurrentSection();
      console.log('üîç Secci√≥n detectada:', currentSection);
      await loadSectionAssets(currentSection);
      console.log('‚úÖ Assets de la secci√≥n cargados correctamente');
    } catch (error) {
      console.error('‚ùå Error al cargar assets de secci√≥n:', error);
    }
  });
</script>
  
  <!-- Script de diagn√≥stico y carga -->
  <script>
    // Muestra mensajes de diagn√≥stico en caso de error
    window.addEventListener('error', function(e) {
      console.error('‚ö†Ô∏è Error en la carga:', e);
      const loadingText = document.querySelector('.loading-text');
      if (loadingText) {
        loadingText.innerHTML = 'Error al cargar la aplicaci√≥n<br><small>' + 
          e.message.substring(0, 100) + '...</small>';
        loadingText.style.color = '#ff3860';
      }
    });
    
    // Reporte de inicializaci√≥n correcta
    window.addEventListener('load', function() {
      console.log('‚úÖ Aplicaci√≥n cargada correctamente');
    });
  </script>
</body>
</html>