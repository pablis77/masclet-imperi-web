{"version":3,"file":"Navbar.C2uKcpYW.js","sources":["../../../src/components/layout/Navbar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport type { NavbarProps, MenuItem, UserRole } from './types';\nimport { AnimalIcon } from '../icons';\nimport OptimizedImage from '../ui/OptimizedImage';\n\n/**\n * Barra de navegaci√≥n principal con soporte para modo responsive\n */\nconst Navbar: React.FC<NavbarProps> = ({ \n  userRole = 'usuario',\n  currentPath = '/',\n  title = 'Masclet Imperi'\n}) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isDarkMode, setIsDarkMode] = useState(false);\n  const [isHighContrast, setIsHighContrast] = useState(false);\n\n  // Men√∫ de navegaci√≥n seg√∫n rol\n  const menuItems: MenuItem[] = [\n    { \n      name: \"Dashboard\", \n      url: \"/\", \n      icon: \"bull\", \n      iconClass: \"w-6 h-6\", \n      roles: [\"administrador\", \"Ramon\", \"editor\", \"usuario\"] as UserRole[] \n    },\n    { \n      name: \"Explotaciones\", \n      url: \"/explotacions\", \n      icon: \"cow\", \n      iconClass: \"w-6 h-6\", \n      roles: [\"administrador\", \"Ramon\", \"editor\", \"usuario\"] as UserRole[] \n    },\n    { \n      name: \"Animales\", \n      url: \"/animals\", \n      icon: \"nursing-cow\", \n      iconClass: \"w-6 h-6\", \n      roles: [\"administrador\", \"Ramon\", \"editor\", \"usuario\"] as UserRole[] \n    },\n    { \n      name: \"Usuarios\", \n      url: \"/users\", \n      icon: \"users\", \n      iconClass: \"\", \n      roles: [\"administrador\", \"Ramon\"] as UserRole[] \n    },\n    { \n      name: \"Importaci√≥n\", \n      url: \"/imports\", \n      icon: \"import\", \n      iconClass: \"\", \n      roles: [\"administrador\"] as UserRole[] \n    },\n    { \n      name: \"Backup\", \n      url: \"/backup\", \n      icon: \"backup\", \n      iconClass: \"\", \n      roles: [\"administrador\"] as UserRole[] \n    },\n    { \n      name: \"Mi Perfil\", \n      url: \"/profile\", \n      icon: \"user\", \n      iconClass: \"\", \n      roles: [\"administrador\", \"Ramon\", \"editor\", \"usuario\"] as UserRole[] \n    },\n  ];\n\n  // Filtrar men√∫ por rol\n  const filteredMenu = menuItems.filter(item => item.roles.includes(userRole as UserRole));\n\n  // Funci√≥n para determinar si un elemento est√° activo\n  const isActive = (itemUrl: string): boolean => {\n    if (itemUrl === '/' && currentPath === '/') return true;\n    if (itemUrl !== '/' && currentPath.startsWith(itemUrl)) return true;\n    return false;\n  };\n\n  // Toggle del men√∫ m√≥vil\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  // Toggle del tema oscuro\n  const toggleDarkMode = () => {\n    const newDarkMode = !isDarkMode;\n    setIsDarkMode(newDarkMode);\n    \n    // Aplicar modo oscuro al documento\n    if (newDarkMode) {\n      document.documentElement.classList.add('dark');\n      localStorage.setItem('darkMode', 'true');\n    } else {\n      document.documentElement.classList.remove('dark');\n      localStorage.setItem('darkMode', 'false');\n    }\n  };\n\n  // Toggle del alto contraste\n  const toggleHighContrast = () => {\n    const newHighContrast = !isHighContrast;\n    setIsHighContrast(newHighContrast);\n    \n    // Aplicar alto contraste al documento\n    if (newHighContrast) {\n      document.documentElement.classList.add('high-contrast');\n      localStorage.setItem('highContrast', 'true');\n    } else {\n      document.documentElement.classList.remove('high-contrast');\n      localStorage.setItem('highContrast', 'false');\n    }\n  };\n\n  // Cargar preferencias guardadas al montar el componente\n  useEffect(() => {\n    // Cargar preferencia de tema oscuro\n    const savedDarkMode = localStorage.getItem('darkMode') === 'true';\n    setIsDarkMode(savedDarkMode);\n    if (savedDarkMode) {\n      document.documentElement.classList.add('dark');\n    }\n    \n    // Cargar preferencia de alto contraste\n    const savedHighContrast = localStorage.getItem('highContrast') === 'true';\n    setIsHighContrast(savedHighContrast);\n    if (savedHighContrast) {\n      document.documentElement.classList.add('high-contrast');\n    }\n  }, []);\n\n  // Renderizar el icono adecuado para cada elemento del men√∫\n  const renderIcon = (item: MenuItem) => {\n    // Si el icono es una referencia a un tipo de animal\n    if (['bull', 'cow', 'nursing-cow'].includes(item.icon)) {\n      return (\n        <AnimalIcon \n          type={item.icon as any} \n          size={24} \n          className={`${item.iconClass || ''} mr-2`}\n        />\n      );\n    }\n    \n    // Si es otro tipo de icono (custom o emoji)\n    if (item.icon.startsWith('/')) {\n      // Es una URL de imagen\n      return <img src={item.icon} alt={item.name} className={`${item.iconClass || ''} mr-2`} />;\n    } else {\n      // Es un emoji u otro tipo de texto\n      return <span className=\"mr-2 text-xl\">{item.icon}</span>;\n    }\n  };\n\n  return (\n    <header className=\"bg-primary text-white shadow-lg relative z-40\">\n      <div className=\"container mx-auto px-4 py-3 flex justify-between items-center\">\n        {/* Logo y t√≠tulo */}\n        <div className=\"flex items-center space-x-2\">\n          <a href=\"/\" className=\"font-bold text-xl flex items-center truncate\">\n            <OptimizedImage src=\"/images/logo_masclet.png\" alt=\"Masclet Imperi\" className=\"h-10 w-auto mr-2\" priority={true} />\n            <span className=\"hidden xs:inline\">MASCLET IMPERI</span>\n          </a>\n        </div>\n\n        {/* T√≠tulo de la p√°gina actual (solo visible en m√≥vil) */}\n        <div className=\"md:hidden text-center font-medium truncate max-w-[140px]\">\n          {title}\n        </div>\n\n        {/* Men√∫ de navegaci√≥n (visible solo en escritorio) */}\n        <nav className=\"hidden md:flex space-x-4 lg:space-x-6\">\n          {filteredMenu.map((item, index) => (\n            <a \n              key={`desktop-nav-${index}`}\n              href={item.url} \n              className={`\n                flex items-center transition-colors duration-150 px-4 py-2 rounded-md text-base\n                ${isActive(item.url) \n                  ? \"bg-primary-dark text-white font-medium\" \n                  : \"hover:bg-primary/20\"}\n              `}\n            >\n              {renderIcon(item)}\n              {item.name}\n              {item.badge && (\n                <span className=\"ml-1.5 bg-accent text-white text-xs px-2 py-0.5 rounded-full\">\n                  {item.badge}\n                </span>\n              )}\n            </a>\n          ))}\n        </nav>\n\n        {/* Controles de la derecha */}\n        <div className=\"flex items-center\">\n          {/* Controles de tema visible en m√≥vil */}\n          <div className=\"flex items-center mr-2 md:hidden\">\n            <button \n              onClick={toggleDarkMode}\n              className=\"text-white hover:text-alletar transition-colors p-2 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white\"\n              aria-label={isDarkMode ? \"Cambiar a modo claro\" : \"Cambiar a modo oscuro\"}\n            >\n              <span className={!isDarkMode ? \"hidden\" : \"\"}>üåû</span>\n              <span className={isDarkMode ? \"hidden\" : \"\"}>üåô</span>\n            </button>\n          </div>\n          \n          {/* Bot√≥n de men√∫ m√≥vil */}\n          <button \n            onClick={toggleMenu}\n            className=\"md:hidden text-white text-2xl p-2 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white\"\n            aria-label={isMenuOpen ? \"Cerrar men√∫\" : \"Abrir men√∫\"}\n          >\n            {isMenuOpen ? \"‚úï\" : \"‚ò∞\"}\n          </button>\n          \n          {/* Controles de escritorio */}\n          <div className=\"hidden md:flex items-center space-x-4\">\n            {/* Toggle de tema */}\n            <button \n              onClick={toggleDarkMode}\n              className=\"text-white hover:text-alletar transition-colors p-2 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white\"\n              aria-label={isDarkMode ? \"Cambiar a modo claro\" : \"Cambiar a modo oscuro\"}\n            >\n              <span className={!isDarkMode ? \"hidden\" : \"\"}>üåû</span>\n              <span className={isDarkMode ? \"hidden\" : \"\"}>üåô</span>\n            </button>\n            \n            {/* Toggle de alto contraste */}\n            <button \n              onClick={toggleHighContrast}\n              className=\"text-white hover:text-alletar transition-colors p-2 hidden xs:block focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white\"\n              aria-label={isHighContrast ? \"Desactivar alto contraste\" : \"Activar alto contraste\"}\n            >\n              <span>üëÅÔ∏è</span>\n            </button>\n            \n            {/* Indicador de rol */}\n            <span className=\"text-sm capitalize bg-primary-dark/30 px-3 py-1 rounded-full\">\n              {userRole}\n            </span>\n            \n            {/* Bot√≥n de cierre de sesi√≥n */}\n            <button \n              className=\"bg-white/10 hover:bg-white/20 transition-colors text-white px-3 py-1.5 rounded-md text-sm font-medium\"\n              onClick={() => {\n                // Limpiar token y redirigir al login\n                localStorage.removeItem('token');\n                window.location.href = '/login';\n              }}\n            >\n              Cerrar sesi√≥n\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Men√∫ m√≥vil (oculto por defecto) */}\n      <div \n        className={`md:hidden bg-primary-dark absolute top-full left-0 right-0 shadow-lg z-40 transition-all duration-200 ${\n          isMenuOpen ? 'max-h-screen opacity-100' : 'max-h-0 opacity-0 pointer-events-none'\n        } overflow-hidden`}\n      >\n        <div className=\"container mx-auto px-4 py-2\">\n          <nav className=\"flex flex-col\">\n            {filteredMenu.map((item, index) => (\n              <a \n                key={`mobile-nav-${index}`}\n                href={item.url} \n                className={`\n                  flex items-center py-4 px-4 border-b border-white/10 transition-colors text-base\n                  ${isActive(item.url) \n                    ? \"bg-white/10 font-medium\" \n                    : \"hover:bg-white/5\"}\n                `}\n                onClick={() => setIsMenuOpen(false)}\n              >\n                {renderIcon(item)}\n                <span>{item.name}</span>\n                {item.badge && (\n                  <span className=\"ml-auto bg-accent text-white text-xs px-2 py-0.5 rounded-full\">\n                    {item.badge}\n                  </span>\n                )}\n              </a>\n            ))}\n            \n            <div className=\"flex flex-wrap justify-between items-center mt-3 pt-2 px-4 gap-2\">\n              {/* Toggle de tema en men√∫ m√≥vil */}\n              <button \n                onClick={toggleDarkMode}\n                className=\"flex items-center py-3 focus:outline-none\"\n              >\n                <span>{isDarkMode ? \"üåû\" : \"üåô\"}</span>\n                <span className=\"ml-3\">{isDarkMode ? \"Modo claro\" : \"Modo oscuro\"}</span>\n              </button>\n              \n              {/* Toggle de contraste en men√∫ m√≥vil */}\n              <button \n                onClick={toggleHighContrast}\n                className=\"flex items-center py-3 focus:outline-none\"\n              >\n                <span>üëÅÔ∏è</span>\n                <span className=\"ml-3\">\n                  {isHighContrast ? \"Desactivar contraste\" : \"Alto contraste\"}\n                </span>\n              </button>\n            </div>\n            \n            <div className=\"border-t border-white/20 mt-2 pt-2 px-4 flex flex-wrap justify-between items-center gap-2\">\n              <span className=\"text-sm capitalize bg-white/10 px-3 py-1 rounded-full\">\n                {userRole}\n              </span>\n              <button \n                className=\"bg-white/10 hover:bg-white/20 transition-colors text-white px-3 py-1.5 rounded-md text-sm font-medium\"\n                onClick={() => {\n                  // Limpiar token y redirigir al login\n                  localStorage.removeItem('token');\n                  window.location.href = '/login';\n                }}\n              >\n                Cerrar sesi√≥n\n              </button>\n            </div>\n          </nav>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Navbar;\n"],"names":["Navbar","userRole","currentPath","title","isMenuOpen","setIsMenuOpen","useState","isDarkMode","setIsDarkMode","isHighContrast","setIsHighContrast","filteredMenu","item","isActive","itemUrl","toggleMenu","toggleDarkMode","newDarkMode","toggleHighContrast","newHighContrast","useEffect","savedDarkMode","savedHighContrast","renderIcon","jsx","AnimalIcon","jsxs","OptimizedImage","index"],"mappings":"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"}