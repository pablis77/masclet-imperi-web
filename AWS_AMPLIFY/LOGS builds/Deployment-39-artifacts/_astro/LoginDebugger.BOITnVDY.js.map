{"version":3,"file":"LoginDebugger.BOITnVDY.js","sources":["../../../src/components/debug/LoginDebugger.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { jwtDecode } from 'jwt-decode';\n\n/**\n * Componente para depurar el proceso de login\n * Muestra información detallada sobre el token y usuario actual\n */\nexport const LoginDebugger = () => {\n  const [tokenInfo, setTokenInfo] = useState<any>(null);\n  const [userInfo, setUserInfo] = useState<any>(null);\n  const [showDebugger, setShowDebugger] = useState<boolean>(true);\n\n  useEffect(() => {\n    try {\n      // Obtener token\n      const token = localStorage.getItem('token');\n      if (token) {\n        try {\n          const decoded = jwtDecode<any>(token);\n          setTokenInfo(decoded);\n        } catch (error) {\n          console.error('Error al decodificar token:', error);\n        }\n      }\n\n      // Obtener usuario\n      const userJson = localStorage.getItem('user');\n      if (userJson) {\n        try {\n          const user = JSON.parse(userJson);\n          setUserInfo(user);\n        } catch (error) {\n          console.error('Error al parsear usuario:', error);\n        }\n      }\n    } catch (error) {\n      console.error('Error general:', error);\n    }\n  }, []);\n\n  const toggleDebugger = () => {\n    setShowDebugger(!showDebugger);\n  };\n\n  if (!tokenInfo && !userInfo) {\n    return <div className=\"bg-gray-100 p-3 rounded-lg mb-4\">No hay información de sesión</div>;\n  }\n\n  return (\n    <div className=\"bg-gray-100 p-3 rounded-lg mb-4 text-xs\">\n      <div className=\"flex justify-between items-center mb-2\">\n        <h3 className=\"font-bold\">Depurador de Login</h3>\n        <button \n          onClick={toggleDebugger}\n          className=\"text-blue-500 hover:text-blue-700\"\n        >\n          {showDebugger ? 'Ocultar' : 'Mostrar'}\n        </button>\n      </div>\n\n      {showDebugger && (\n        <div>\n          <div className=\"mb-3\">\n            <h4 className=\"font-semibold\">Token JWT:</h4>\n            <pre className=\"bg-white p-2 rounded overflow-auto max-h-32\">\n              {JSON.stringify(tokenInfo, null, 2)}\n            </pre>\n            \n            <div className=\"mt-2\">\n              <div><strong>Sub:</strong> {tokenInfo?.sub}</div>\n              <div><strong>Username:</strong> {tokenInfo?.username}</div>\n              <div><strong>Role:</strong> {tokenInfo?.role}</div>\n              <div><strong>Exp:</strong> {tokenInfo?.exp ? new Date(tokenInfo.exp * 1000).toLocaleString() : 'N/A'}</div>\n            </div>\n          </div>\n\n          <div>\n            <h4 className=\"font-semibold\">Usuario en localStorage:</h4>\n            <pre className=\"bg-white p-2 rounded overflow-auto max-h-32\">\n              {JSON.stringify(userInfo, null, 2)}\n            </pre>\n\n            <div className=\"mt-2\">\n              <div><strong>Username:</strong> {userInfo?.username}</div>\n              <div><strong>Rol:</strong> {userInfo?.role}</div>\n              <div><strong>Email:</strong> {userInfo?.email}</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LoginDebugger;\n"],"names":["LoginDebugger","tokenInfo","setTokenInfo","useState","userInfo","setUserInfo","showDebugger","setShowDebugger","useEffect","token","decoded","jwtDecode","error","userJson","user","toggleDebugger","jsx","jsxs"],"mappings":"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"}