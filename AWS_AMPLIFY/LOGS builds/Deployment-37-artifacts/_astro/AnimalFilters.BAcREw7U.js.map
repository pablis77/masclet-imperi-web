{"version":3,"file":"AnimalFilters.BAcREw7U.js","sources":["../../../src/components/animals/AnimalFilters.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport type { AnimalFilters as AnimalFiltersType } from '../../services/animalService';\n\n// Objeto que almacenará las traducciones una vez esté en el cliente\nlet labelText = 'Buscar';\nlet placeholderText = 'Buscar por nombre, explotación, código...';\nlet clearButtonText = 'Limpiar';\nlet searchButtonText = 'BUSCAR';\n\n// Función para actualizar textos (se llamará en useEffect)\nfunction updateTexts(lang: string) {\n  if (lang === 'ca') {\n    labelText = 'Cercar';\n    placeholderText = 'Cercar per nom, explotació, codi...';\n    clearButtonText = 'Netejar';\n    searchButtonText = 'CERCAR';\n  } else {\n    labelText = 'Buscar';\n    placeholderText = 'Buscar por nombre, explotación, código...';\n    clearButtonText = 'Limpiar';\n    searchButtonText = 'BUSCAR';\n  }\n}\n\ninterface AnimalFiltersProps {\n  onApplyFilters?: (filters: AnimalFiltersType) => void;\n  initialFilters?: AnimalFiltersType;\n  id?: string;\n}\n\nconst AnimalFilters: React.FC<AnimalFiltersProps> = ({ \n  onApplyFilters, \n  initialFilters = {},\n  id\n}) => {\n  const [filters, setFilters] = useState<AnimalFiltersType>(initialFilters);\n  \n  // Gestión del idioma - simplificado para evitar problemas de hidratación\n  const [isClient, setIsClient] = useState(false);\n  \n  useEffect(() => {\n    // Esto solo se ejecuta en el cliente\n    setIsClient(true);\n    const userLang = localStorage.getItem('userLanguage') || 'es';\n    // Actualizar los textos basados en el idioma\n    updateTexts(userLang);\n    \n    // Escuchar cambios de idioma\n    const checkLanguage = () => {\n      const currentLang = localStorage.getItem('userLanguage') || 'es';\n      updateTexts(currentLang);\n      // Forzar una actualización\n      setIsClient(prevState => !prevState);\n    };\n    \n    window.addEventListener('storage', checkLanguage);\n    return () => window.removeEventListener('storage', checkLanguage);\n  }, []);\n\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    \n    // Actualizar los filtros con el valor de búsqueda\n    setFilters(prev => ({\n      ...prev,\n      [name]: value === '' ? undefined : value\n    }));\n  };\n  \n  // Manejar la pulsación de Enter en el campo de búsqueda\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      handleApplyFilters();\n    }\n  };\n\n  const handleApplyFilters = () => {\n    // Si hay una función onApplyFilters proporcionada, llamarla\n    if (onApplyFilters) {\n      onApplyFilters(filters);\n    }\n    \n    // Emitir un evento personalizado para que otros componentes puedan escucharlo\n    document.dispatchEvent(new CustomEvent('filters-applied', {\n      detail: filters\n    }));\n  };\n\n  const handleClearFilters = () => {\n    const emptyFilters: AnimalFiltersType = {};\n    setFilters(emptyFilters);\n    \n    // Aplicar los filtros vacíos\n    if (onApplyFilters) {\n      onApplyFilters(emptyFilters);\n    }\n    \n    // Emitir evento con filtros vacíos\n    document.dispatchEvent(new CustomEvent('filters-applied', {\n      detail: emptyFilters\n    }));\n    \n    // Recargar la lista de animales\n    document.dispatchEvent(new CustomEvent('reload-animals'));\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 gap-4\" id={id}>\n      {/* Búsqueda consolidada */}\n      <div className=\"mb-3\">\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {labelText}\n        </label>\n        <div className=\"relative\">\n          <input\n            type=\"text\"\n            name=\"search\"\n            value={filters.search || ''}\n            onChange={handleInputChange}\n            onKeyDown={handleKeyDown}\n            placeholder={placeholderText}\n            className=\"w-full px-3 py-2 pl-9 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary dark:bg-gray-700 dark:text-white\"\n          />\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <span className=\"text-gray-500 dark:text-gray-400\">🔍</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Botones */}\n      <div className=\"flex justify-end space-x-2 mt-2\">\n        <button\n          type=\"button\"\n          onClick={handleClearFilters}\n          className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary\"\n        >\n          {clearButtonText}\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleApplyFilters}\n          className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary\"\n        >\n          {searchButtonText}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default AnimalFilters;\n"],"names":["labelText","placeholderText","clearButtonText","searchButtonText","updateTexts","lang","AnimalFilters","onApplyFilters","initialFilters","id","filters","setFilters","useState","isClient","setIsClient","useEffect","userLang","checkLanguage","currentLang","prevState","handleInputChange","e","name","value","prev","handleKeyDown","handleApplyFilters","handleClearFilters","emptyFilters","jsxs","jsx"],"mappings":"gDAIA,IAAIA,EAAY,SACZC,EAAkB,4CAClBC,EAAkB,UAClBC,EAAmB,SAGvB,SAASC,EAAYC,EAAc,CAC7BA,IAAS,MACCL,EAAA,SACMC,EAAA,sCACAC,EAAA,UACCC,EAAA,WAEPH,EAAA,SACMC,EAAA,4CACAC,EAAA,UACCC,EAAA,SAEvB,CAQA,MAAMG,EAA8C,CAAC,CACnD,eAAAC,EACA,eAAAC,EAAiB,CAAC,EAClB,GAAAC,CACF,IAAM,CACJ,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAA4BJ,CAAc,EAGlE,CAACK,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAK,EAE9CG,EAAAA,UAAU,IAAM,CAEdD,EAAY,EAAI,EAChB,MAAME,EAAW,aAAa,QAAQ,cAAc,GAAK,KAEzDZ,EAAYY,CAAQ,EAGpB,MAAMC,EAAgB,IAAM,CAC1B,MAAMC,EAAc,aAAa,QAAQ,cAAc,GAAK,KAC5Dd,EAAYc,CAAW,EAEXJ,EAAAK,GAAa,CAACA,CAAS,CACrC,EAEO,cAAA,iBAAiB,UAAWF,CAAa,EACzC,IAAM,OAAO,oBAAoB,UAAWA,CAAa,CAClE,EAAG,EAAE,EAGC,MAAAG,EAAqBC,GAA2C,CACpE,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAM,EAAIF,EAAE,OAG1BV,EAAoBa,IAAA,CAClB,GAAGA,EACH,CAACF,CAAI,EAAGC,IAAU,GAAK,OAAYA,CAAA,EACnC,CACJ,EAGME,EAAiBJ,GAA6C,CAC9DA,EAAE,MAAQ,SACOK,EAAA,CAEvB,EAEMA,EAAqB,IAAM,CAE3BnB,GACFA,EAAeG,CAAO,EAIf,SAAA,cAAc,IAAI,YAAY,kBAAmB,CACxD,OAAQA,CAAA,CACT,CAAC,CACJ,EAEMiB,EAAqB,IAAM,CAC/B,MAAMC,EAAkC,CAAC,EACzCjB,EAAWiB,CAAY,EAGnBrB,GACFA,EAAeqB,CAAY,EAIpB,SAAA,cAAc,IAAI,YAAY,kBAAmB,CACxD,OAAQA,CAAA,CACT,CAAC,EAGF,SAAS,cAAc,IAAI,YAAY,gBAAgB,CAAC,CAC1D,EAEA,OACGC,EAAAA,KAAA,MAAA,CAAI,UAAU,yBAAyB,GAAApB,EAEtC,SAAA,CAACoB,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,kEACd,SACH9B,EAAA,EACA6B,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAAAC,EAAA,IAAC,QAAA,CACC,KAAK,OACL,KAAK,SACL,MAAOpB,EAAQ,QAAU,GACzB,SAAUU,EACV,UAAWK,EACX,YAAaxB,EACb,UAAU,oLAAA,CACZ,EACA6B,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC,OAAK,CAAA,UAAU,mCAAmC,SAAA,IAAE,CAAA,CACvD,CAAA,CAAA,CACF,CAAA,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,kCACb,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASH,EACT,UAAU,2QAET,SAAAzB,CAAA,CACH,EACA4B,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASJ,EACT,UAAU,gMAET,SAAAvB,CAAA,CAAA,CACH,CACF,CAAA,CAAA,EACF,CAEJ"}