{"version":3,"file":"Sidebar.C3PG_rYZ.js","sources":["../../../src/components/layout/Sidebar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport OptimizedImage from '../ui/OptimizedImage';\nimport type { SidebarProps, MenuSection, UserRole } from './types';\nimport { AnimalIcon } from '../icons';\n\n/**\n * Barra lateral con navegaci√≥n organizada por secciones\n */\nconst Sidebar: React.FC<SidebarProps> = ({\n  userRole = 'usuario',\n  currentPath = '/',\n  isOpen = false,\n  onToggle\n}) => {\n  // Estructura del men√∫ organizada por secciones\n  const menuSections: MenuSection[] = [\n    {\n      title: \"Principal\",\n      items: [\n        { \n          name: \"Dashboard\", \n          url: \"/\", \n          icon: \"bull\",\n          roles: [\"administrador\", \"Ramon\", \"editor\", \"usuario\"] as UserRole[] \n        },\n        { \n          name: \"Explotaciones\", \n          url: \"/explotacions\", \n          icon: \"cow\",\n          roles: [\"administrador\", \"Ramon\", \"editor\", \"usuario\"] as UserRole[] \n        }\n      ]\n    },\n    {\n      title: \"Gesti√≥n\",\n      items: [\n        { \n          name: \"Animales\", \n          url: \"/animals\", \n          icon: \"nursing-cow\", \n          roles: [\"administrador\", \"Ramon\", \"editor\", \"usuario\"] as UserRole[] \n        }\n      ]\n    },\n    {\n      title: \"Administraci√≥n\",\n      items: [\n        { \n          name: \"Importaci√≥n\", \n          url: \"/imports\", \n          icon: \"üì•\", \n          roles: [\"administrador\"] as UserRole[] \n        },\n        { \n          name: \"Usuarios\", \n          url: \"/users\", \n          icon: \"üë•\", \n          roles: [\"administrador\", \"Ramon\"] as UserRole[] \n        },\n        { \n          name: \"Backup\", \n          url: \"/backup\", \n          icon: \"üíæ\", \n          roles: [\"administrador\"] as UserRole[] \n        }\n      ]\n    }\n  ];\n\n  // Funci√≥n para determinar si un elemento est√° activo\n  const isActive = (itemUrl: string): boolean => {\n    if (itemUrl === '/' && currentPath === '/') return true;\n    if (itemUrl !== '/' && currentPath.startsWith(itemUrl)) return true;\n    return false;\n  };\n\n  // Filtrar men√∫ por rol\n  const filteredSections = menuSections\n    .map(section => ({\n      ...section,\n      items: section.items.filter(item => item.roles.includes(userRole as UserRole))\n    }))\n    .filter(section => section.items.length > 0);\n\n  // Renderizar el icono correcto para cada elemento\n  const renderIcon = (icon: string) => {\n    // Si el icono es una referencia a un tipo de animal\n    if (['bull', 'cow', 'nursing-cow', 'deceased'].includes(icon)) {\n      return (\n        <AnimalIcon \n          type={icon as any} \n          size={24} \n          className=\"mr-3\" \n        />\n      );\n    }\n    \n    // Para otros tipos de iconos (emojis)\n    return <span className=\"mr-3 text-xl\">{icon}</span>;\n  };\n\n  return (\n    <aside \n      className={`masclet-sidebar w-64 bg-white dark:bg-gray-800 min-h-screen shadow-md border-r border-gray-100 dark:border-gray-800 transition-transform duration-300 z-40 ${\n        isOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'\n      } fixed md:relative`}\n    >\n      {/* Cabecera del sidebar con logo */}\n      <div className=\"p-4 border-b border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center\">\n        <div className=\"w-16 h-16 md:w-20 md:h-20 mb-3\">\n          <OptimizedImage src=\"/images/logo_masclet.png\" alt=\"Masclet Imperi Logo\" className=\"w-full h-full object-contain\" priority={true} />\n        </div>\n        <p className=\"text-xs md:text-sm text-text-secondary dark:text-gray-300 text-center\">Sistema de Gesti√≥n Ganadera</p>\n      </div>\n\n      {/* Bot√≥n para cerrar el sidebar en m√≥vil */}\n      {onToggle && (\n        <button \n          onClick={onToggle}\n          className=\"md:hidden absolute top-4 right-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary\"\n          aria-label=\"Cerrar sidebar\"\n        >\n          <span className=\"text-2xl\">‚úï</span>\n        </button>\n      )}\n\n      {/* Navegaci√≥n principal */}\n      <nav className=\"p-4 overflow-y-auto h-[calc(100vh-18rem)]\">\n        {filteredSections.map((section, sectionIndex) => (\n          <div key={`sidebar-section-${sectionIndex}`} className=\"mb-6\">\n            <h3 className=\"text-xs font-semibold text-text-muted dark:text-gray-400 uppercase tracking-wider mb-3 px-3\">\n              {section.title}\n            </h3>\n            <ul className=\"space-y-1\">\n              {section.items.map((item, itemIndex) => (\n                <li key={`sidebar-item-${sectionIndex}-${itemIndex}`}>\n                  <a \n                    href={item.url}\n                    className={`flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded-md text-sm transition-colors duration-150 ${\n                      isActive(item.url)\n                        ? \"bg-primary/10 dark:bg-primary/20 text-primary dark:text-primary-light font-medium\"\n                        : \"text-text-primary dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-primary dark:hover:text-primary-light\"\n                    }`}\n                    onClick={() => {\n                      // En dispositivos m√≥viles, cerrar el sidebar al hacer clic\n                      if (window.innerWidth < 768 && onToggle) {\n                        onToggle();\n                      }\n                    }}\n                  >\n                    {renderIcon(item.icon)}\n                    <span>{item.name}</span>\n                    {item.badge && (\n                      <span className=\"ml-auto bg-accent text-white text-xs px-2 py-0.5 rounded-full\">\n                        {item.badge}\n                      </span>\n                    )}\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </div>\n        ))}\n      </nav>\n\n      {/* Pie con informaci√≥n de usuario */}\n      <div className=\"p-3 md:p-4 mt-auto border-t border-gray-100 dark:border-gray-700 absolute bottom-0 w-full bg-white dark:bg-gray-800\">\n        <div className=\"flex flex-col space-y-2\">\n          {/* Rol del usuario */}\n          <div className=\"flex items-center text-xs md:text-sm text-text-secondary dark:text-gray-300 rounded-md p-2 bg-tertiary/10 dark:bg-gray-700\">\n            <span className=\"mr-2\">üë§</span>\n            <span className=\"font-medium\">Rol: <span className=\"text-primary dark:text-primary-light capitalize\">{userRole}</span></span>\n          </div>\n          \n          {/* Indicador de versi√≥n */}\n          <div className=\"text-xs text-gray-500 dark:text-gray-400 text-center\">\n            v1.0.0 - {new Date().getFullYear()} Masclet Imperi\n          </div>\n        </div>\n      </div>\n    </aside>\n  );\n};\n\nexport default Sidebar;\n"],"names":["Sidebar","userRole","currentPath","isOpen","onToggle","menuSections","isActive","itemUrl","filteredSections","section","item","renderIcon","icon","jsx","AnimalIcon","jsxs","OptimizedImage","sectionIndex","itemIndex"],"mappings":"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"}