import{r as c,j as e}from"./vendor-react.DLP523nT.js";import{a as O}from"./apiService.BiZKHdlD.js";import"./vendor-charts.C44Mn7ly.js";import"./vendor.CIJYp_OF.js";typeof window<"u"&&window.location.hostname.includes("render.com");let $={baseURL:"/api/v1",backendURL:"",headers:{"Content-Type":"application/json"}};console.log("[API Config] Usando modo: PRODUCCI√ìN");console.log(`[API Config] Base URL: ${$.baseURL}`);const U=()=>({isAuthenticated:!0,canImport:!0,message:""}),z=()=>{try{return localStorage.getItem("auth_token")}catch(t){return console.error("Error al obtener token:",t),null}},A={async getImportHistory(t={}){try{const s=new URLSearchParams;t.status&&s.append("status",t.status),t.startDate&&s.append("start_date",t.startDate),t.endDate&&s.append("end_date",t.endDate),t.fileName&&s.append("file_name",t.fileName);const o=t.page||1,p=t.limit||10;s.append("page",o.toString()),s.append("limit",p.toString()),console.log("[ImportService] Consultando historial de importaciones");const u=`/imports/?${s.toString()}`,g=await O.get(u);return g&&g.items?{items:g.items||[],total:g.total||0,page:g.page||1,limit:g.size||10,totalPages:g.totalPages||1}:(console.error("Error: Formato de respuesta inesperado:",g),{items:[],total:0,page:1,limit:10,totalPages:1})}catch(s){return console.error("Error general al obtener historial de importaciones:",s),{items:[],total:0,page:1,limit:10,totalPages:1}}},async importAnimals(t){try{const s=U();!s.isAuthenticated||s.canImport;const o=z();console.log("Token de autenticaci√≥n:",o?"Presente":"No hay token");const p={};o?p.Authorization=`Bearer ${o}`:(p.Authorization="Bearer test_token_for_development",console.log("Usando token de desarrollo para pruebas"));let u="FormData sin archivo";const g=t.get("file");g instanceof File&&(u=`Archivo: ${g.name}, ${g.size} bytes, tipo: ${g.type}`);const n=$.backendURL;console.log("Enviando petici√≥n directa al backend:",`${n}/api/v1/imports/csv`),console.log("Contenido del FormData:",u);try{const i=await fetch(`${n}/api/v1/imports/csv`,{method:"POST",body:t,headers:p});if(i.ok){const f=await i.json();return console.log("Respuesta exitosa desde el backend:",f),f}const k=await i.text();return console.error("Error en la petici√≥n al backend:",{status:i.status,statusText:i.statusText,error:k}),{success:!1,message:`Error HTTP ${i.status}: ${i.statusText}`,total_processed:0,total_imported:0,total_errors:1,errors:[`Fallo al comunicarse con el backend: ${i.status}`]}}catch(i){return console.error("Error en la petici√≥n fetch:",i),{success:!1,message:`Error de red: ${i.message}`,total_processed:0,total_imported:0,total_errors:1,errors:["Error de conexi√≥n con el servidor"]}}}catch(s){return console.error("Error general al importar animales:",s),{success:!1,message:s.message||"Error desconocido al importar animales",total_processed:0,total_imported:0,total_errors:1,errors:[s.message||"Error desconocido"]}}},async downloadAnimalTemplate(){try{const t=[{nom:"NOMBRE_ANIMAL",genere:"F",estado:"OK",alletar:"0",mare:"NOMBRE_MADRE",pare:"NOMBRE_PADRE",quadra:"NOMBRE_CUADRA",cod:"CODIGO",num_serie:"NUMERO_SERIE",dob:"DD/MM/YYYY"}],s=Object.keys(t[0]).join(","),o=t.map(u=>Object.values(u).join(",")),p=[s,...o].join(`
`);return new Blob([p],{type:"text/csv;charset=utf-8"})}catch(t){throw console.error("Error al generar plantilla:",t),t}},async downloadPartoTemplate(){try{const t=[{nom_animal:"NOMBRE_VACA",date_part:"DD/MM/YYYY",genere_t:"M",estado_t:"OK"}],s=Object.keys(t[0]).join(","),o=t.map(u=>Object.values(u).join(",")),p=[s,...o].join(`
`);return new Blob([p],{type:"text/csv;charset=utf-8"})}catch(t){throw console.error("Error al generar plantilla:",t),t}}},H=({onImportComplete:t})=>{const s=c.useRef(null),[o,p]=c.useState(null),[u,g]=c.useState(!1),[n,i]=c.useState(null),[k,f]=c.useState(null),[S,C]=c.useState(""),[E,m]=c.useState("es"),y={es:{selectFile:"Seleccionar archivo CSV",dragDrop:"Arrastra un archivo CSV o haz clic para seleccionar",fileTooBig:"El archivo es demasiado grande. Tama√±o m√°ximo: 10MB",selectFileFirst:"Debes seleccionar un archivo CSV primero",mustBeCSV:"El archivo debe tener extensi√≥n .csv",fileSelected:"Archivo seleccionado",size:"Tama√±o",type:"Tipo",bytes:"bytes"},ca:{selectFile:"Seleccionar arxiu CSV",dragDrop:"Arrossega un arxiu CSV o fes clic per seleccionar",fileTooBig:"L'arxiu √©s massa gran. Mida m√†xima: 10MB",selectFileFirst:"Has de seleccionar un arxiu CSV primer",mustBeCSV:"L'arxiu ha de tenir extensi√≥ .csv",fileSelected:"Arxiu seleccionat",size:"Mida",type:"Tipus",bytes:"bytes"}};c.useEffect(()=>{const v=localStorage.getItem("userLanguage")||"es";m(v);const r=h=>{h.key==="userLanguage"&&m(h.newValue||"es")};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}},[]);const j=".csv",I=v=>{const r=v.target.files;if(r&&r.length>0){p(r[0]),i(null),f(null);const h=y[E]||y.es;C(`${h.fileSelected}: ${r[0].name}
${h.size}: ${r[0].size} ${h.bytes}
${h.type}: ${r[0].type}`)}},D=()=>{p(null),i(null),f(null),C(""),s.current&&(s.current.value="")},x=async()=>{if(!o){f(y[E]?.selectFileFirst||y.es.selectFileFirst);return}if(console.log("Archivo seleccionado:",o.name),console.log("Tama√±o del archivo:",o.size,"bytes"),console.log("Tipo del archivo:",o.type),!o.name.toLowerCase().endsWith(".csv")){f(y[E]?.mustBeCSV||y.es.mustBeCSV);return}const v=10*1024*1024;if(o.size>v){f(y[E]?.fileTooBig||y.es.fileTooBig);return}try{g(!0),f(null),i(null),C("Iniciando importaci√≥n de datos..."),await new Promise(b=>setTimeout(b,300));const r=localStorage.getItem("auth_token");r?C(b=>b+`

Token de autenticaci√≥n encontrado: ${r.substring(0,10)}...`):(C(b=>b+`

ADVERTENCIA: No se encontr√≥ token de autenticaci√≥n en localStorage.`),localStorage.setItem("auth_token","test_token_for_development"),C(b=>b+`
Se ha creado un token de prueba para desarrollo.`));const h=new FormData;h.append("file",o),console.log("FormData creado con archivo:",o.name),h.append("description","Importaci√≥n desde frontend"),console.log("Contenido del FormData:");for(const b of h.entries())console.log(b[0]+": "+(b[1]instanceof File?`[File: ${b[1].name}, ${b[1].size} bytes]`:b[1]));h.append("validate_only","false"),h.append("skip_errors","false");const N=await A.importAnimals(h);i(N),t&&t(N);const P=new CustomEvent("import-complete",{detail:N});document.dispatchEvent(P)}catch(r){console.error("Error al importar datos:",r),f(`Error al importar datos: ${r.message||"Error desconocido"}`)}finally{g(!1)}};return c.useEffect(()=>{const v=()=>{D()},r=()=>{x()};return document.addEventListener("reset-import",v),document.addEventListener("import-btn-click",r),()=>{document.removeEventListener("reset-import",v),document.removeEventListener("import-btn-click",r)}},[o]),e.jsxs("div",{className:"import-form",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:y[E]?.selectFile||y.es.selectFile}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsx("div",{className:"flex-grow",children:e.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("input",{id:"file-upload",type:"file",accept:j,onChange:I,ref:s,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:u}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"üìÅ"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?o.name:y[E]?.dragDrop||y.es.dragDrop}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:o?`${(o.size/1024).toFixed(2)} KB - ${o.type||"text/csv"}`:"Solo se permiten archivos CSV"})]})]})})})]}),S&&!1,k&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-red-500 dark:text-red-400 text-lg",children:"üö®"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-200",children:e.jsx("p",{children:k})})]})]})}),n&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border ${n.success?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-lg",children:n.success?"‚úÖ":"‚ö†Ô∏è"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:`text-sm font-medium ${n.success?"text-green-800 dark:text-green-300":"text-yellow-800 dark:text-yellow-300"}`,children:n.success?"Importaci√≥n completada":"Importaci√≥n con advertencias"}),e.jsxs("div",{className:`mt-2 text-sm ${n.success?"text-green-700 dark:text-green-200":"text-yellow-700 dark:text-yellow-200"}`,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3 mb-3",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total registros"}),e.jsx("p",{className:"text-lg font-bold",children:n.total_processed||n.records_count||7})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded border border-green-200 dark:border-green-800",children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Importados correctamente"}),e.jsx("p",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:n.total_imported||(n.status==="completed"?n.records_count||7:0)})]}),e.jsxs("div",{className:(n.total_errors||0)>0?"bg-red-50 dark:bg-red-900/20 p-3 rounded border border-red-200 dark:border-red-800":"bg-gray-50 dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:(n.total_errors||0)>0?"text-xs text-red-600 dark:text-red-400":"text-xs text-gray-500 dark:text-gray-400",children:"Registros con errores"}),e.jsx("p",{className:(n.total_errors||0)>0?"text-lg font-bold text-red-700 dark:text-red-300":"text-lg font-bold",children:n.total_errors||(n.status==="failed"?n.records_count||7:0)})]})]}),n.message&&e.jsx("p",{className:"mt-2 font-medium",children:n.message})]}),(n.total_errors||0)>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:()=>{console.log("Descargar errores de importaci√≥n")},className:"inline-flex items-center px-3 py-1.5 border border-red-300 dark:border-red-700 text-xs font-medium rounded-md text-red-700 dark:text-red-400 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx("span",{className:"mr-1",children:"üì•"}),"Descargar errores"]})})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 dark:bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Procesando importaci√≥n"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"Esto puede tardar unos momentos dependiendo del tama√±o del archivo."})]})})})]})},Y=({className:t="",defaultFilters:s={},refreshTrigger:o=0})=>{const[p,u]=c.useState([]),[g,n]=c.useState(s),[i,k]=c.useState(!1),[f,S]=c.useState(null),[C,E]=c.useState(0),[m,y]=c.useState(1),[j,I]=c.useState(1),[D]=c.useState(10),[x,v]=c.useState("es"),r={es:{loadingError:"No se pudo cargar el historial de importaciones",noImports:"No hay importaciones registradas",filename:"Nombre de archivo",importDate:"Fecha de importaci√≥n",status:"Estado",records:"Registros",actions:"Acciones",loading:"Cargando historial...",viewDetails:"Ver detalles",downloadReport:"Descargar reporte",statusCompleted:"Completado",statusCompletedErrors:"Completado con errores",statusFailed:"Error",statusProcessing:"Procesando",statusPending:"Pendiente",prev:"Anterior",next:"Siguiente",page:"P√°gina",of:"de",total:"Total",first:"Primera"},ca:{loadingError:"No s'ha pogut carregar l'historial d'importacions",noImports:"No hi ha importacions registrades",filename:"Nom d'arxiu",importDate:"Data d'importaci√≥",status:"Estat",records:"Registres",actions:"Accions",loading:"Carregant historial...",viewDetails:"Veure detalls",downloadReport:"Descarregar informe",statusCompleted:"Completat",statusCompletedErrors:"Completat amb errors",statusFailed:"Error",statusProcessing:"Processant",statusPending:"Pendent",prev:"Anterior",next:"Seg√ºent",page:"P√†gina",of:"de",total:"Total",first:"Primera"}};c.useEffect(()=>{const a=localStorage.getItem("userLanguage")||"es";v(a);const d=l=>{l.key==="userLanguage"&&v(l.newValue||"es")};return window.addEventListener("storage",d),()=>{window.removeEventListener("storage",d)}},[]);const h=async()=>{k(!0),S(null);try{const a={...g,page:m,limit:D};console.log("[ImportHistory] Consultando API con filtros:",a);const d=await A.getImportHistory(a);u(d.items),E(d.total),I(d.totalPages)}catch(a){console.error("Error al cargar el historial de importaciones:",a),S(r[x]?.loadingError||r.es.loadingError)}finally{k(!1)}};c.useEffect(()=>{h()},[g,m,o]);const N=a=>{y(a)},P=a=>new Date(a).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),b=a=>{let d="",l="",w="";switch(a){case"completed":d="bg-green-100 dark:bg-green-800",l="text-green-800 dark:text-green-100",w=r[x]?.statusCompleted||r.es.statusCompleted;break;case"completed_err":d="bg-amber-100 dark:bg-amber-800",l="text-amber-800 dark:text-amber-100",w=r[x]?.statusCompletedErrors||r.es.statusCompletedErrors;break;case"failed":d="bg-red-100 dark:bg-red-800",l="text-red-800 dark:text-red-100",w=r[x]?.statusFailed||r.es.statusFailed;break;case"processing":d="bg-blue-100 dark:bg-blue-800",l="text-blue-800 dark:text-blue-100",w=r[x]?.statusProcessing||r.es.statusProcessing;break;case"pending":d="bg-amber-100 dark:bg-amber-800",l="text-amber-800 dark:text-amber-100",w=r[x]?.statusPending||r.es.statusPending;break;default:d="bg-gray-100 dark:bg-gray-700",l="text-gray-800 dark:text-gray-100",w=a.replace("_"," ").replace(/\b\w/g,F=>F.toUpperCase())}return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d} ${l}`,children:w})},R=async a=>{try{k(!0);const d=["L√≠nea","Columna","Valor","Error"],l=[{L√≠nea:"2",Columna:"Genere",Valor:"X",Error:"Valor no v√°lido para g√©nero. Use M o F."},{L√≠nea:"3",Columna:"Data Naixement",Valor:"32/01/2020",Error:"Fecha no v√°lida"},{L√≠nea:"5",Columna:"Mare",Valor:"999",Error:"Animal madre no encontrado"}];let w=d.join(";")+`
`;l.forEach(B=>{const M=d.map(V=>{const L=B[V]||"";return typeof L=="string"&&(L.includes(";")||L.includes('"'))?`"${L.replace(/"/g,'""')}"`:L});w+=M.join(";")+`
`});const F=new Blob([w],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(F),_=document.createElement("a");_.href=T,_.setAttribute("download",`errores_importacion_${a}.csv`),document.body.appendChild(_),_.click(),document.body.removeChild(_)}catch(d){console.error("Error al descargar errores:",d),S(r[x]?.loadingError||r.es.loadingError)}finally{k(!1)}};return e.jsxs("div",{className:`${t}`,children:[f&&e.jsx("div",{className:"mb-4 p-4 border border-red-200 bg-red-50 text-red-800 dark:bg-red-900/50 dark:text-red-100 dark:border-red-800 rounded-lg",children:f}),i?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-600 dark:text-gray-300",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 font-medium",children:r[x]?.loading||r.es.loading})]}):p.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üìã"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:r[x]?.noImports||r.es.noImports}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Las importaciones que realices aparecer√°n aqu√≠."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"ID"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r[x]?.filename||r.es.filename}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r[x]?.importDate||r.es.importDate}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r[x]?.records||r.es.records}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r[x]?.status||r.es.status}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r[x]?.actions||r.es.actions})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:p.map((a,d)=>e.jsxs("tr",{className:d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:a.id}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.filename}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Por: ",a.user_name||"Sistema"]})]})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:P(a.created_at)}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm text-gray-900 dark:text-white",children:["Total: ",a.total_records]}),e.jsxs("div",{className:"flex mt-1 text-xs",children:[a.successful_records>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400 mr-2",children:["√âxito: ",a.successful_records]}),a.failed_records>0&&e.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Errores: ",a.failed_records]})]})]})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:b(a.status)}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm",children:a.failed_records>0&&e.jsx("button",{className:`inline-flex items-center px-2.5 py-1.5 border border-red-300 dark:border-red-700 text-xs font-medium rounded 
                                   text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/30 
                                   focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-800 transition-colors`,onClick:()=>R(a.id),children:r[x]?.downloadReport||r.es.downloadReport})})]},a.id))})]})}),j>1&&e.jsxs("div",{className:"flex items-center justify-center mt-6 space-x-1",children:[e.jsxs("button",{onClick:()=>N(1),disabled:m===1,className:`inline-flex items-center px-2 py-1 border rounded-md text-sm font-medium 
                          ${m===1?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"sr-only",children:r[x]?.first||"Primera"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})]}),e.jsxs("button",{onClick:()=>N(m-1),disabled:m===1,className:`inline-flex items-center px-2 py-1 border rounded-md text-sm font-medium 
                          ${m===1?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"sr-only",children:r[x]?.prev||r.es.prev}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),[...Array(j)].map((a,d)=>{const l=d+1;return l===1||l===j||l>=m-1&&l<=m+1?e.jsx("button",{onClick:()=>N(l),className:`inline-flex items-center px-3 py-1 border text-sm font-medium rounded-md 
                                ${l===m?"bg-primary/10 dark:bg-primary/30 text-primary border-primary/20 dark:border-primary/40":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:l},l):l===m-2||l===m+2?e.jsx("span",{className:"px-1 text-gray-500 dark:text-gray-400",children:"..."},`ellipsis-${l}`):null}),e.jsxs("button",{onClick:()=>N(m+1),disabled:m===j,className:`inline-flex items-center px-2 py-1 border rounded-md text-sm font-medium 
                          ${m===j?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"sr-only",children:"Siguiente"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("button",{onClick:()=>N(j),disabled:m===j,className:`inline-flex items-center px-2 py-1 border rounded-md text-sm font-medium 
                          ${m===j?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"sr-only",children:"√öltima"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})]})]})]})]})},X=()=>{const[t,s]=c.useState(0),[o,p]=c.useState("es"),u={es:{historyTitle:"Historial de Importaciones"},ca:{historyTitle:"Historial d'Importacions"}};c.useEffect(()=>{const n=localStorage.getItem("userLanguage")||"es";p(n);const i=k=>{k.key==="userLanguage"&&p(k.newValue||"es")};return window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}},[]);const g=n=>{console.log("Importaci√≥n completada. Actualizando historial...",n),s(i=>i+1)};return e.jsxs(e.Fragment,{children:[e.jsx(H,{onImportComplete:g}),e.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 border border-gray-100 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold mb-3 md:mb-4 text-gray-800 dark:text-white",children:u[o]?.historyTitle||u.es.historyTitle}),e.jsx(Y,{refreshTrigger:t})]})]})};export{X as default};
