const t="admin",o=typeof window<"u",n={isAuthenticated(){return!!this.getToken()},getToken(){if(o)try{return localStorage.getItem("token")}catch(e){console.warn("Error accediendo a localStorage:",e)}return"token-desarrollo-12345"},async login(e){if(e.username==="admin"&&e.password==="admin123"){const r={id:1,username:"admin",role:"administrador",fullName:"Administrador"},a="token-simulado-admin-12345";return this.saveToken(a),this.saveUser(r),{user:r,token:a}}throw new Error("Credenciales inválidas")},logout(){this.removeToken(),this.removeUser()},async register(e){return{id:Date.now(),...e,created_at:new Date().toISOString()}},async updateUser(e,r){return{id:e,...r,updated_at:new Date().toISOString()}},getStoredUser(){if(o)try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.warn("Error obteniendo usuario de localStorage:",e),null}return null},saveUser(e){if(o&&e)try{localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("userRole",e.role||"usuario")}catch(r){console.warn("Error guardando usuario en localStorage:",r)}},removeUser(){if(o)try{localStorage.removeItem("user"),localStorage.removeItem("userRole")}catch(e){console.warn("Error eliminando usuario de localStorage:",e)}},async getCurrentUser(){const e=this.getStoredUser();return e||null},saveToken(e){if(o)try{localStorage.setItem("token",e)}catch(r){console.warn("Error guardando token:",r)}},removeToken(){if(o)try{localStorage.removeItem("token")}catch(e){console.warn("Error eliminando de localStorage:",e)}},async ensureAuthenticated(){return this.getToken()||(this.saveToken("token-desarrollo-12345"),console.info("Token de desarrollo generado automáticamente")),!0},getAuthHeaders(){return{Authorization:`Bearer ${this.getToken()||"token-desarrollo-12345"}`}},getCurrentUserRole(){if(o)try{return localStorage.getItem("userRole")||t}catch(e){console.warn("Error al obtener rol de usuario:",e)}return t}};o&&setTimeout(()=>{try{localStorage.getItem("token")||(localStorage.setItem("token","token-desarrollo-12345"),console.info("Token de desarrollo generado automáticamente")),localStorage.getItem("userRole")||(localStorage.setItem("userRole",t),console.info("Rol de usuario por defecto establecido:",t))}catch(e){console.warn("Error inicializando valores por defecto:",e)}},100);const s=()=>n.isAuthenticated(),l=()=>n.getStoredUser(),i=()=>n.getCurrentUser();export{i as a,l as g,s as i};
