import{i}from"./authService.CvC7CJU-.js";import"./LanguageSwitcher.astro_astro_type_script_index_0_lang.BEmjKfY9.js";import"./vendor.CwhrWGr6.js";document.addEventListener("DOMContentLoaded",()=>{window.location.pathname!=="/login"&&!i()&&(window.location.href=`/login?redirect=${encodeURIComponent(window.location.pathname)}`)});function r(o,e,n=7){const a=new Date(Date.now()+n*864e5).toUTCString();document.cookie=o+"="+encodeURIComponent(e)+"; expires="+a+"; path=/; SameSite=Lax"}function t(){try{const o=localStorage.getItem("user");if(o){const e=JSON.parse(o);e.username==="admin"?(e.role!=="administrador"&&(e.role="administrador",localStorage.setItem("user",JSON.stringify(e))),r("userRole","administrador")):e.role&&r("userRole",e.role),console.log("Cookie de rol actualizada:",e.role)}else console.log("No se encontraron datos de usuario en localStorage")}catch(o){console.error("Error al actualizar la cookie de rol:",o)}}document.addEventListener("DOMContentLoaded",t);window.addEventListener("storage",o=>{o.key==="user"&&t()});(document.readyState==="complete"||document.readyState==="interactive")&&t();
