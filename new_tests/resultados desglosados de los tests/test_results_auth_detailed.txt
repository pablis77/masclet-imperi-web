============================= test session starts =============================
platform win32 -- Python 3.11.11, pytest-8.3.4, pluggy-1.5.0 -- C:\Users\Usuario\anaconda3\envs\masclet-imperi\python.exe
cachedir: .pytest_cache
rootdir: C:\Proyectos\claude\masclet-imperi-web
configfile: pytest.ini
plugins: anyio-3.7.1, asyncio-0.25.3, cov-6.0.0, env-1.1.5, ordering-0.6
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function
collecting ... collected 7 items

new_tests/auth/test_auth.py::test_login Probando autenticación con usuario: admin
URL: http://localhost:8000/api/v1/auth/login

Código de estado: 200
Autenticación exitosa!
Token: eyJhbGciOiJIUzI1NiIs...
Test de login completado.
PASSED                           [ 14%]
new_tests/auth/test_auth.py::test_refresh_token Test de renovación de token exitoso.
PASSED                   [ 28%]
new_tests/auth/test_auth.py::test_get_users Test de listado de usuarios ajustado y exitoso.
PASSED                       [ 42%]
new_tests/auth/test_auth.py::test_delete_user Test de eliminación de usuario exitoso.
PASSED                     [ 57%]
new_tests/auth/test_auth_change_password.py::test_change_user_password_by_admin 
Probando cambio de contraseña por administrador: http://localhost:8000/api/v1/auth/users/27/password
Código de estado: 200
Respuesta: Contraseña actualizada correctamente
Verificación de inicio de sesión con nueva contraseña exitosa.
Test de cambio de contraseña por administrador completado con éxito.
PASSED [ 71%]
new_tests/auth/test_auth_change_password.py::test_change_own_password 
Probando cambio de contraseña por el propio usuario: http://localhost:8000/api/v1/auth/users/28/password
Código de estado: 200
Respuesta: Contraseña actualizada correctamente
Verificación de inicio de sesión con nueva contraseña exitosa.
Test de cambio de contraseña por el propio usuario completado con éxito.
PASSED [ 85%]
new_tests/auth/test_auth_me.py::test_get_current_user_info 
Probando endpoint de información de usuario: http://localhost:8000/api/v1/auth/me
Código de estado: 200
Datos del usuario obtenidos correctamente:
- Username: admin
- Email: admin@mascletimperi.com
- Role: administrador
- ID: 1
- Active: True
Test de información de usuario completado con éxito.
PASSED        [100%]

============================== 7 passed in 3.13s ==============================
