import axios from 'axios';

const getEnvironment = () => {
  if (typeof window === "undefined") return "server";
  const hostname = window.location.hostname;
  if (hostname.includes("loca.lt")) return "localtunnel";
  if (hostname === "localhost" || hostname.includes("192.168.")) return "local";
  return "production";
};
const environment = getEnvironment();
const isLocalTunnel = environment === "localtunnel";
let baseURL;
let useRelativeUrls = false;
switch (environment) {
  case "localtunnel":
    baseURL = "https://api-masclet-imperi.loca.lt/api/v1";
    break;
  case "local":
    baseURL = "http://localhost:8000/api/v1";
    break;
  case "production":
    baseURL = "http://masclet-api:8000/api/v1";
    useRelativeUrls = false;
    break;
  case "server":
    baseURL = "http://masclet-api:8000/api/v1";
    useRelativeUrls = false;
    break;
  default:
    baseURL = "http://masclet-api:8000/api/v1";
}
const API_BASE_URL = baseURL;
console.log("üåé Modo de conexi√≥n:", environment);
console.log("üîå API Base URL:", baseURL);
console.log("üîó URLs Relativas:", useRelativeUrls ? "S√ç" : "NO");
function normalizePath(path) {
  path = path.startsWith("/") ? path.substring(1) : path;
  return path.endsWith("/") ? path : `${path}/`;
}
console.log("üåé Modo de conexi√≥n:", environment);
console.log("üîå API Base URL:", baseURL || "URL relativa");
const api = axios.create({
  baseURL,
  timeout: 15e3,
  headers: {
    "Content-Type": "application/json",
    "X-Environment": environment
  },
  withCredentials: false
  // Evita problemas con CORS
});
