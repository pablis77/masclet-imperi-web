---
// Props que pueden ser pasados al componente
interface Props {
  showVersion?: boolean;
  version?: string;
}

// Valores por defecto
const { 
  showVersion = true,
  version = "1.0.0"
} = Astro.props;

// Obtener el a√±o actual
const currentYear = new Date().getFullYear();
---

<footer class="bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 relative z-30">
  <div class="container mx-auto px-4 py-3 md:py-4">
    <div class="flex flex-col xs:flex-row justify-between items-center text-sm text-gray-600 dark:text-gray-300">
      <div class="text-center xs:text-left mb-2 xs:mb-0">
        &copy; {currentYear} Masclet Imperi - Todos los derechos reservados
      </div>
      
      {showVersion && (
        <div class="flex space-x-3 items-center">
          <span>
            Versi√≥n {version}
          </span>
          
          <!-- Toggle de alto contraste para m√≥vil (visible solo en m√≥vil) -->
          <button id="footer-contrast-toggle" class="xs:hidden p-1.5 rounded-full bg-white dark:bg-gray-700 shadow-sm border border-gray-200 dark:border-gray-600">
            <span class="text-xs">üëÅÔ∏è</span>
          </button>
        </div>
      )}
    </div>
  </div>
</footer>

<script>
  // Setup del bot√≥n de contraste en el footer
  const footerContrastToggle = document.getElementById('footer-contrast-toggle');
  
  if (footerContrastToggle) {
    footerContrastToggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('high-contrast-mode');
      
      // Guardar preferencia
      const isHighContrast = document.documentElement.classList.contains('high-contrast-mode');
      localStorage.setItem('highContrast', isHighContrast ? 'true' : 'false');
    });
    
    // Aplicar contraste guardado al iniciar
    if (localStorage.getItem('highContrast') === 'true') {
      document.documentElement.classList.add('high-contrast-mode');
    }
  }
</script>

<style>
  /* Breakpoint personalizado para dispositivos muy peque√±os */
  @media (min-width: 400px) {
    .xs\:flex-row {
      flex-direction: row;
    }
    .xs\:text-left {
      text-align: left;
    }
    .xs\:mb-0 {
      margin-bottom: 0;
    }
    .xs\:hidden {
      display: none;
    }
  }
  
  /* Footer sobre bot√≥n flotante en m√≥vil */
  @media (max-width: 768px) {
    footer {
      padding-bottom: calc(0.75rem + env(safe-area-inset-bottom, 0));
    }
  }
</style>