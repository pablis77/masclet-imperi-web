{"version":3,"file":"auth-proxy.astro.mjs","sources":["../../../../src/pages/api/auth-proxy/index.ts"],"sourcesContent":["import type { APIRoute } from 'astro';\n\n// Definición del endpoint POST para autenticación\nexport const POST: APIRoute = async ({ request }) => {\n  try {\n    // URL del backend (usando la ruta correcta)\n    const backendUrl = 'http://localhost:8000/api/v1/auth/login';\n    \n    // Obtener los datos JSON del cuerpo de la solicitud\n    const data = await request.json();\n    \n    // Preparar datos para la autenticación en el formato correcto para FastAPI\n    const formData = new URLSearchParams();\n    formData.append('username', data.username);\n    formData.append('password', data.password);\n    \n    // Realizar la solicitud al backend\n    const response = await fetch(backendUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formData\n    });\n    \n    // Obtener los datos de respuesta del backend\n    const responseData = await response.json();\n    \n    // Devolver la respuesta con el mismo código de estado\n    return new Response(\n      JSON.stringify(responseData),\n      {\n        status: response.status,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n    );\n  } catch (error) {\n    // Manejo de errores\n    console.error('Error en el proxy de autenticación:', error);\n    \n    return new Response(\n      JSON.stringify({ \n        error: 'Error en la autenticación',\n        message: error instanceof Error ? error.message : 'Error desconocido'\n      }),\n      {\n        status: 500,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n    );\n  }\n};\n"],"names":[],"mappings":";;AAGO,MAAM,IAAiB,GAAA,OAAO,EAAE,OAAA,EAAc,KAAA;AACnD,EAAI,IAAA;AAEF,IAAA,MAAM,UAAa,GAAA,yCAAA;AAGnB,IAAM,MAAA,IAAA,GAAO,MAAM,OAAA,CAAQ,IAAK,EAAA;AAGhC,IAAM,MAAA,QAAA,GAAW,IAAI,eAAgB,EAAA;AACrC,IAAS,QAAA,CAAA,MAAA,CAAO,UAAY,EAAA,IAAA,CAAK,QAAQ,CAAA;AACzC,IAAS,QAAA,CAAA,MAAA,CAAO,UAAY,EAAA,IAAA,CAAK,QAAQ,CAAA;AAGzC,IAAM,MAAA,QAAA,GAAW,MAAM,KAAA,CAAM,UAAY,EAAA;AAAA,MACvC,MAAQ,EAAA,MAAA;AAAA,MACR,OAAS,EAAA;AAAA,QACP,cAAgB,EAAA;AAAA,OAClB;AAAA,MACA,IAAM,EAAA;AAAA,KACP,CAAA;AAGD,IAAM,MAAA,YAAA,GAAe,MAAM,QAAA,CAAS,IAAK,EAAA;AAGzC,IAAA,OAAO,IAAI,QAAA;AAAA,MACT,IAAA,CAAK,UAAU,YAAY,CAAA;AAAA,MAC3B;AAAA,QACE,QAAQ,QAAS,CAAA,MAAA;AAAA,QACjB,OAAS,EAAA;AAAA,UACP,cAAgB,EAAA;AAAA;AAClB;AACF,KACF;AAAA,WACO,KAAO,EAAA;AAEd,IAAQ,OAAA,CAAA,KAAA,CAAM,uCAAuC,KAAK,CAAA;AAE1D,IAAA,OAAO,IAAI,QAAA;AAAA,MACT,KAAK,SAAU,CAAA;AAAA,QACb,KAAO,EAAA,2BAAA;AAAA,QACP,OAAS,EAAA,KAAA,YAAiB,KAAQ,GAAA,KAAA,CAAM,OAAU,GAAA;AAAA,OACnD,CAAA;AAAA,MACD;AAAA,QACE,MAAQ,EAAA,GAAA;AAAA,QACR,OAAS,EAAA;AAAA,UACP,cAAgB,EAAA;AAAA;AAClB;AACF,KACF;AAAA;AAEJ,CAAA;;;;;;;;;;;"}