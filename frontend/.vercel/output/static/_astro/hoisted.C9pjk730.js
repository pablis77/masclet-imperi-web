import"./hoisted.Aq9NsjF5.js";import"./LanguageSwitcher.astro_astro_type_script_index_0_lang.DhuIQNJ0.js";import"./vendor.DPE1g--N.js";const M=document.createElement("script");M.src="/scripts/animal-history.js";M.type="text/javascript";document.head.appendChild(M);console.log("üîç VERIFICACI√ìN: Script interno ejecut√°ndose correctamente");document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("tab-changes");l?(console.log("üîç Encontrada pesta√±a de historial, agregando event listener"),l.addEventListener("click",function(){console.log("üîÑ REGISTRADO: Clic en pesta√±a de historial desde script principal")})):console.warn("‚ö†Ô∏è No se encontr√≥ la pesta√±a de historial")});const B=document.createElement("script");B.src="/scripts/editar-parto-v4.js";B.type="text/javascript";document.head.appendChild(B);document.addEventListener("DOMContentLoaded",()=>{console.log("DOM completamente cargado y analizado");const l=document.getElementById("export-animal-pdf"),h=document.getElementById("export-partos-pdf"),m=document.getElementById("export-changes-pdf");l&&l.addEventListener("click",v),h&&h.addEventListener("click",v),m&&m.addEventListener("click",v);function v(){try{const a=document.querySelector("h2.text-2xl").textContent,r=document.getElementById("animal-id-text").textContent.split(":")[1].trim(),o=localStorage.getItem("userLanguage")||"es",{jsPDF:s}=window.jspdf,e=new s,t=o==="ca"?`Fitxa d'Animal - ${a}`:`Ficha de Animal - ${a}`;e.setFontSize(10),e.setTextColor(100,100,100);const n=new Date().toLocaleDateString(o==="ca"?"ca-ES":"es-ES");e.text(o==="ca"?`Data: ${n}`:`Fecha: ${n}`,195,15,{align:"right"});const d=10;let f=d+35+20;try{const c="/images/logo_masclet.png",_=e.internal.pageSize.getWidth(),k=_/2-45/2;e.addImage(c,"PNG",k,d,45,35),e.setFontSize(20),e.setTextColor(40,40,40),e.text(t,_/2,d+35+10,{align:"center"}),f=d+35+25}catch(c){console.error("Error al cargar el logo:",c);const E=e.internal.pageSize.getWidth();e.setFontSize(20),e.setTextColor(40,40,40),e.text(t,E/2,30,{align:"center"}),f=45}e.setFontSize(14),e.setTextColor(50,50,50),e.text(o==="ca"?"Dades de l'animal:":"Datos del animal:",20,f);const x=[];document.querySelectorAll("#content-info .space-y-3").forEach(c=>{c.querySelectorAll("div").forEach(E=>{const N=E.querySelector("p.text-sm")?.textContent,_=E.querySelector("p.font-medium")?.textContent;N&&_&&x.push([N,_])})}),window.autoTable(e,{startY:f+10,head:[[o==="ca"?"Camp":"Campo","Valor"]],body:x,theme:"grid",styles:{fontSize:9,cellPadding:2,lineWidth:.1,lineColor:[200,200,200],minCellHeight:8,valign:"middle"},headStyles:{fillColor:[126,211,33],textColor:255,fontStyle:"bold",minCellHeight:10},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:40,halign:"left"},1:{cellWidth:"auto",halign:"left"}}});const b=x.find(c=>c[0].includes("Sexo")||c[0].includes("G√©nero")),I=b&&(b[1]==="Hembra"||b[1]==="Femella"||b[1]==="F");let C=e.previousAutoTable.finalY+15;if(I){const c=[],E=document.querySelector("#content-partos table tbody");if(E){const N=E.querySelectorAll("tr");let _=!1;if(N.forEach(k=>{const q=k.querySelectorAll("td");if(q.length>=3&&!k.textContent.includes("No hay registros")){_=!0;const G=q[0]?.textContent?.trim()||"N/A",O=q[1]?.textContent?.trim()||"N/A",V=q[2]?.querySelector("span")?.textContent?.trim()||"N/A",R=q[3]?.textContent?.trim()||"N/A";c.push([G,O,V,R])}}),_&&c.length>0){e.setFontSize(14),e.setTextColor(50,50,50),e.text(o==="ca"?"Historial de Parts:":"Historial de Partos:",20,C);const k=[o==="ca"?"Data":"Fecha",o==="ca"?"G√®nere":"G√©nero",o==="ca"?"Estat":"Estado",o==="ca"?"Observacions":"Observaciones"];window.autoTable(e,{startY:C+5,head:[k],body:c,theme:"grid",styles:{fontSize:8,cellPadding:2,lineWidth:.1,lineColor:[200,200,200],minCellHeight:6,valign:"middle"},headStyles:{fillColor:[126,211,33],textColor:255,fontStyle:"bold",minCellHeight:8},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:25,halign:"center"},1:{cellWidth:30,halign:"center"},2:{cellWidth:25,halign:"center"},3:{cellWidth:"auto",halign:"left"}}}),C=e.previousAutoTable.finalY+15}}}const L=document.querySelector(".p-4.bg-gray-50 p")?.textContent;if(L&&L!==(o==="ca"?"No hi ha observacions":"No hay observaciones")){e.setFontSize(14),e.setTextColor(50,50,50),e.text(o==="ca"?"Observacions:":"Observaciones:",20,C),e.setFontSize(10),e.setTextColor(80,80,80);const c=e.splitTextToSize(L,170);e.text(c,20,C+10)}const $=e.internal.getNumberOfPages();for(let c=1;c<=$;c++)e.setPage(c),e.setFontSize(8),e.setTextColor(100,100,100),e.text("Masclet Imperi - Sistema de Gesti√≥n Ganadera",105,e.internal.pageSize.height-10,{align:"center"}),e.text(`P√°gina ${c} de ${$}`,195,e.internal.pageSize.height-10,{align:"right"});e.save(`${a}_ficha_${n.replace(/\//g,"")}.pdf`)}catch(a){console.error("Error al generar PDF:",a),alert(localStorage.getItem("userLanguage")==="ca"?"Error en generar el PDF":"Error al generar el PDF")}}const z={es:{title:"Ficha de Animal",back_to_list:"Volver al listado",animal_id:"ID Animal",loading:"Cargando datos del animal...",error_title:"Error",retry:"Reintentar",active:"Activo",inactive:"Baja",dead:"Fallecido",update:"Actualizar",code:"C√≥digo",name:"Nombre",serial_number:"N√∫mero de Serie",gender:"Sexo",male:"Macho",female:"Hembra",birth_date:"Fecha de nacimiento",not_available:"No disponible",incorrect_date:"Fecha incorrecta",status:"Estado",exploitation:"Explotaci√≥n",stable:"Origen",not_assigned:"No asignada",father:"Padre",mother:"Madre",nursing_status:"Estado de amamantamiento",not_nursing:"No amamanta",nursing_one:"Amamanta a un ternero",nursing_two:"Amamanta a dos terneros",back_to_animal_list:"Volver al listado de animales",complete_info_tab:"Informaci√≥n Completa",birth_history_tab:"Historial de Partos",changes_history_tab:"Historial de Cambios",identification_data:"Datos de Identificaci√≥n",general_data:"Datos Generales",birth_history:"Historial de Partos",birth_registry:"Registro de todos los partos del animal",no_births:"Este animal no tiene partos registrados",date:"Fecha",gender_label:"G√©nero",observations:"Observaciones",changes_history:"Historial de Cambios",changes_registry:"Registro de cambios realizados al animal",no_changes:"No hay cambios registrados para este animal",changes_date:"Fecha",changes_user:"Usuario",changes_field:"Campo",changes_old_value:"Valor anterior",changes_new_value:"Valor nuevo"},ca:{title:"Fitxa d'Animal",back_to_list:"Tornar al llistat",animal_id:"ID Animal",loading:"Carregant dades de l'animal...",error_title:"Error",retry:"Reintentar",active:"Actiu",inactive:"Baixa",dead:"Mort",update:"Actualitzar",code:"Codi",name:"Nom",serial_number:"N√∫mero de S√®rie",gender:"Sexe",male:"Mascle",female:"Femella",birth_date:"Data de naixement",not_available:"No disponible",incorrect_date:"Data incorrecta",status:"Estat",exploitation:"Explotaci√≥",stable:"Origen",not_assigned:"No assignada",father:"Pare",mother:"Mare",nursing_status:"Estat d'alletament",not_nursing:"No alleta",nursing_one:"Alleta un vedell",nursing_two:"Alleta dos vedells",back_to_animal_list:"Tornar al llistat d'animals",complete_info_tab:"Informaci√≥ Completa",birth_history_tab:"Historial de Parts",changes_history_tab:"Historial de Canvis",identification_data:"Dades d'Identificaci√≥",general_data:"Dades Generals",birth_history:"Historial de Parts",birth_registry:"Registre de tots els parts de l'animal",no_births:"Aquest animal no t√© parts registrats",date:"Data",gender_label:"G√®nere",observations:"Observacions",changes_history:"Historial de Canvis",changes_registry:"Registre de canvis realitzats a l'animal",no_changes:"No hi ha canvis registrats per a aquest animal",changes_date:"Data",changes_user:"Usuari",changes_field:"Camp",changes_old_value:"Valor anterior",changes_new_value:"Valor nou"}};function i(a,r){return z[r]?.[a]||a}function F(){const a=localStorage.getItem("userLanguage")||"es";document.querySelector("h1.text-3xl").textContent=i("title",a);const r=document.getElementById("animal-id-text");if(r){const e=window.location.pathname.split("/").pop();r.textContent=`${i("animal_id",a)}: ${e}`}[{selector:".text-gray-600.dark\\:text-gray-300",key:"animal_id",prefix:!0},{selector:".animate-spin + p",key:"loading",prefix:!1},{selector:".text-lg.font-medium.text-red-800",key:"error_title",prefix:!1},{selector:"#retry-button",key:"retry",prefix:!0},{selector:'a[href^="/animals/update"]',key:"update",prefix:!0}].forEach(e=>{const t=document.querySelector(e.selector);if(t)if(e.prefix){const d=t.innerHTML.match(/.*?[^\w\s]/);d?t.innerHTML=d[0]+" "+i(e.key,a):t.textContent=i(e.key,a)}else t.textContent=i(e.key,a)});const s=document.querySelector(".px-3.py-1.rounded-full");if(s){const e=s.classList.contains("bg-green-100")||s.classList.contains("text-green-800");s.textContent=i(e?"active":"inactive",a)}document.querySelectorAll(".text-sm.text-gray-500").forEach(e=>{const t=e.textContent.trim();let n="";t.includes("C√≥digo")||t.includes("Codi")?n="code":t.includes("Nombre")||t.includes("Nom")?n="name":t.includes("N√∫mero de Serie")||t.includes("N√∫mero de S√®rie")?n="serial_number":t.includes("Sexo")||t.includes("Sexe")?n="gender":t.includes("Fecha de nacimiento")||t.includes("Data de naixement")?n="birth_date":t.includes("Estado")||t.includes("Estat")?n="status":t.includes("Explotaci√≥n")||t.includes("Explotaci√≥")?n="exploitation":t.includes("Origen")||t.includes("Origen")?n="stable":t.includes("Padre")||t.includes("Pare")?n="father":t.includes("Madre")||t.includes("Mare")?n="mother":(t.includes("amamantamiento")||t.includes("alletament"))&&(n="nursing_status"),n&&(e.textContent=i(n,a))}),document.querySelectorAll('button[id^="tab-"]').forEach(e=>{e.id==="tab-info"?e.textContent=i("complete_info_tab",a):e.id==="tab-partos"?e.textContent=i("birth_history_tab",a):e.id==="tab-changes"&&(e.textContent=i("changes_history_tab",a))}),document.querySelectorAll("h3.text-lg.font-medium").forEach(e=>{const t=e.textContent.trim();let n="";t.includes("Datos de Identificaci√≥n")||t.includes("Dades d'Identificaci√≥")?n="identification_data":t.includes("Datos Generales")||t.includes("Dades Generals")?n="general_data":t.includes("Historial de Partos")||t.includes("Historial de Parts")?n="birth_history":(t.includes("Historial de Cambios")||t.includes("Historial de Canvis"))&&(n="changes_history"),n&&(e.textContent=i(n,a))}),document.querySelectorAll(".mb-4 p.text-gray-500, .p-6.text-center p").forEach(e=>{const t=e.textContent.trim();let n="";t.includes("Registro de todos los partos")||t.includes("Registre de tots els parts")?n="birth_registry":t.includes("No tiene partos registrados")||t.includes("no t√© parts registrats")?n="no_births":t.includes("Registro de cambios")||t.includes("Registre de canvis")?n="changes_registry":(t.includes("No hay cambios registrados")||t.includes("No hi ha canvis registrats"))&&(n="no_changes"),n&&(e.textContent=i(n,a))}),document.querySelectorAll("th.px-6.py-3").forEach(e=>{const t=e.textContent.trim();let n="";if(t.includes("Fecha")||t.includes("Data")){n="date";const d=e.querySelector(".sort-indicator");if(d){e.innerHTML=i(n,a)+' <span class="ml-1 sort-indicator">'+d.innerHTML+"</span>";return}}else t.includes("G√©nero")||t.includes("G√®nere")?n="gender_label":t.includes("Estado")||t.includes("Estat")?n="status":(t.includes("Observaciones")||t.includes("Observacions"))&&(n="observations");n&&(e.textContent=i(n,a))}),document.querySelectorAll('a[href="/animals"].inline-flex').forEach(e=>{e.querySelector("span.mr-2")&&(e.innerHTML=`<span class="mr-2">‚Üê</span> ${i("back_to_animal_list",a)}`)}),document.querySelectorAll(".font-medium").forEach(e=>{const t=e.textContent.trim();t==="No disponible"?e.textContent=i("not_available",a):t==="No asignada"?e.textContent=i("not_assigned",a):t==="Fecha incorrecta"?e.textContent=i("incorrect_date",a):t==="Macho"?e.textContent=i("male",a):t==="Hembra"?e.textContent=i("female",a):t==="Activo"?e.textContent=i("active",a):t==="Fallecido"?e.textContent=i("dead",a):t==="No amamanta"?e.textContent=i("not_nursing",a):t.includes("Amamanta un ternero")?e.textContent=i("nursing_one",a):t.includes("Amamanta dos terneros")&&(e.textContent=i("nursing_two",a))})}F(),window.addEventListener("storage",function(a){a.key==="userLanguage"&&(F(),translateTableButtons())}),document.addEventListener("DOMContentLoaded",function(){function a(){const r=localStorage.getItem("userLanguage")||"es";console.log("[DEBUG] Aplicando traducci√≥n forzada, idioma: "+r),document.querySelectorAll("button").forEach(o=>{o.textContent.trim()==="Eliminar"&&(r==="ca"?o.title="Eliminar part":o.title="Eliminar parto")}),document.querySelectorAll("td").forEach(o=>{const s=o.textContent.trim();s==="Macho"&&(o.innerHTML=r==="ca"?"Mascle":"Macho",console.log("[DEBUG] Traducido Macho‚ÜíMascle")),s==="Hembra"&&(o.innerHTML=r==="ca"?"Femella":"Hembra",console.log("[DEBUG] Traducido Hembra‚ÜíFemella"))}),document.querySelectorAll("td").forEach(o=>{const s=o.textContent.trim();(s==="Sin observaciones"||s==="animals.no_observations")&&(o.innerHTML=r==="ca"?"Sense observacions":"Sin observaciones",console.log("[DEBUG] Traducido observaciones"))}),document.querySelectorAll("span.inline-flex").forEach(o=>{const s=o.textContent.trim();s==="Vivo"&&(o.innerHTML=r==="ca"?"Viu":"Vivo",console.log("[DEBUG] Traducido Vivo‚ÜíViu")),s==="Fallecido"&&(o.innerHTML=r==="ca"?"Mort":"Fallecido",console.log("[DEBUG] Traducido Fallecido‚ÜíMort"))})}a();for(let r=1;r<=20;r++)setTimeout(a,r*500);setInterval(a,2e3),window.addEventListener("storage",function(r){if(r.key==="userLanguage"){console.log("[DEBUG] Cambio de idioma detectado"),a();for(let o=1;o<=10;o++)setTimeout(a,o*200)}})});const g=document.getElementById("retry-button");g&&g.addEventListener("click",()=>{window.location.reload()});const w=document.querySelectorAll("#tab-info, #tab-partos, #tab-changes"),S=document.querySelectorAll("#content-info, #content-partos, #content-changes");console.log("Pesta√±as encontradas:",w.length),console.log("Contenidos encontrados:",S.length);const p=a=>{console.log("Cambiando a pesta√±a:",a),S.forEach(e=>{e.classList.add("hidden")}),w.forEach(e=>{e.classList.remove("text-primary","border-b-2","border-primary","font-medium"),e.classList.add("text-gray-500","dark:text-gray-400","hover:text-gray-700","dark:hover:text-gray-300")});const r=document.getElementById(a);r&&(r.classList.remove("text-gray-500","dark:text-gray-400","hover:text-gray-700","dark:hover:text-gray-300"),r.classList.add("text-primary","border-b-2","border-primary","font-medium"));const o=a.replace("tab-","content-"),s=document.getElementById(o);s&&s.classList.remove("hidden")};p("tab-info"),w.forEach(a=>{a.addEventListener("click",()=>{p(a.id),console.log("Clic en pesta√±a:",a.id)})});const y=document.querySelectorAll("#sort-fecha, #sort-genero, #sort-estado");let T="sort-fecha",u="asc";const A=(a,r)=>{const o=document.getElementById("tabla-partos");if(!o)return;const s=o.querySelector("tbody");if(!s)return;const t=[...Array.from(s.querySelectorAll("tr"))];let n=0;for(a==="sort-genero"&&(n=1),a==="sort-estado"&&(n=2),t.sort((f,x)=>{const b=f.querySelectorAll("td")[n].textContent.trim(),I=x.querySelectorAll("td")[n].textContent.trim();if(a==="sort-fecha"){const C=D(b),L=D(I);return r==="asc"?C-L:L-C}else return r==="asc"?b.localeCompare(I,"es"):I.localeCompare(b,"es")});s.firstChild;)s.removeChild(s.firstChild);t.forEach(f=>s.appendChild(f)),y.forEach(f=>{const x=f.querySelector(".sort-indicator");x&&(x.textContent="")});const P=document.getElementById(a).querySelector(".sort-indicator");P&&(P.textContent=r==="asc"?"‚Üë":"‚Üì")},D=a=>{if(a==="N/A"||a==="Fecha incorrecta")return new Date(0);const r=a.split(/[\/\-]/);return r.length===3?new Date(r[2],r[1]-1,r[0]):new Date(a)};y.forEach(a=>{a.addEventListener("click",()=>{a.id===T?u=u==="asc"?"desc":"asc":(T=a.id,u="asc"),A(T,u)})}),A("sort-fecha","asc")});function j(){let l=document.getElementById("modal-personalizado");return l||(l=document.createElement("div"),l.id="modal-personalizado",l.className="fixed inset-0 flex items-center justify-center z-50 hidden",l.innerHTML=`
      <div class="fixed inset-0 bg-black bg-opacity-25" onclick="document.getElementById('modal-personalizado').classList.add('hidden')"></div>
      <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-auto z-50 relative shadow-lg">
        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4" id="modal-titulo"></h3>
        <p class="text-gray-600 dark:text-gray-300 mb-6" id="modal-mensaje"></p>
        <div class="flex justify-end space-x-4">
          <button id="modal-btn-cancelar" class="px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none">Cancelar</button>
          <button id="modal-btn-confirmar" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none">Confirmar</button>
        </div>
      </div>
    `,document.body.appendChild(l),l.querySelector("#modal-btn-cancelar").addEventListener("click",function(){l.classList.add("hidden")}),l)}function H(l,h="success"){const m=document.createElement("div");m.className=`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white ${h==="success"?"bg-green-500":"bg-red-500"} z-50 animate-fadeIn`,m.textContent=l,document.body.appendChild(m),setTimeout(()=>{m.classList.add("animate-fadeOut"),setTimeout(()=>{m.remove()},500)},3e3)}document.addEventListener("DOMContentLoaded",function(){console.log("DOM cargado: Inicializando funcionalidades de animal...");const l=document.createElement("style");l.textContent=`
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes fadeOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(10px); }
      }
      .animate-fadeIn {
        animation: fadeIn 0.3s ease-out forwards;
      }
      .animate-fadeOut {
        animation: fadeOut 0.3s ease-in forwards;
      }
    `,document.head.appendChild(l);const h=j(),m=document.getElementById("tabla-partos");if(!m)return;const v=m.querySelector("tbody");if(!v||v.querySelectorAll('tr[data-empty="true"]').length>0)return;const i=m.querySelector("thead tr");if(i){const g=document.createElement("th");g.scope="col",g.className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",g.textContent="Acciones",i.appendChild(g)}v.querySelectorAll("tr").forEach(function(g){if(g.getAttribute("data-empty")==="true")return;const w=g.getAttribute("data-id")||`parto-${Math.floor(Math.random()*1e6)}`,S=document.createElement("td");S.className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400";const p=document.createElement("button");p.className="bg-gray-100 text-blue-600 py-1 px-3 rounded-md mr-2 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-blue-400 dark:hover:bg-gray-600",p.title="Editar informaci√≥n del parto",p.textContent="Editar",p.setAttribute("data-id",w);const y=document.createElement("button");y.className="bg-gray-100 text-red-600 py-1 px-3 rounded-md text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-red-400 dark:hover:bg-gray-600",y.textContent="Eliminar",y.setAttribute("data-id",w),y.title="Eliminar parto",S.appendChild(p),S.appendChild(y),g.appendChild(S),p.addEventListener("click",function(T){const u=this.getAttribute("data-id"),A=this.closest("tr");console.log("Editando parto:",u),window.editarPartoV4&&window.editarPartoV4.mostrarModal?window.editarPartoV4.mostrarModal(u,A):(console.error("No se ha cargado correctamente el script de edici√≥n de partos v4"),H("Error al cargar el editor de partos","error"))}),y.addEventListener("click",function(T){const u=this.getAttribute("data-id"),A=this.closest("tr");this.getBoundingClientRect(),document.getElementById("modal-titulo").textContent="Eliminar parto",document.getElementById("modal-mensaje").textContent="¬øSeguro que desea eliminar este parto? Esta acci√≥n no se puede deshacer.",h.classList.remove("hidden");const D=h.querySelector("#modal-btn-confirmar");D.onclick=function(){h.classList.add("hidden"),console.log("Eliminando parto:",u);const a=localStorage.getItem("token");if(!a){H("Error: No se ha encontrado el token de autenticaci√≥n","error");return}const r=window.location.pathname.match(/\/animals\/([0-9]+)/),o=r?r[1]:null;if(!o){alert("Error: No se pudo determinar el ID del animal");return}const s=[`http://localhost:8000/api/v1/animals/${o}/partos/${u}`,`http://localhost:8000/api/v1/partos/${u}`];console.log(`Intentando eliminar parto ${u} del animal ${o}`),fetch(s[0],{method:"DELETE",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then(function(e){return e.ok?e.json().catch(()=>({success:!0})):(console.log(`Endpoint principal fall√≥ con ${e.status}, intentando endpoint alternativo...`),fetch(s[1],{method:"DELETE",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}))}).then(function(e){if(e instanceof Response){const t=e;if(!t.ok)throw new Error(`Error en la API: ${t.status}`);return t.json().catch(()=>({success:!0}))}return e}).then(function(e){if(console.log("Parto eliminado correctamente:",e),A&&(A.remove(),m.querySelectorAll("tbody tr").length===0)){const n=m.querySelector("tbody");if(n){const d=document.createElement("tr");d.setAttribute("data-empty","true"),d.innerHTML=`
                    <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400">
                      No hay registros de partos para este animal
                    </td>
                  `,n.appendChild(d)}}H("Parto eliminado correctamente","success")}).catch(function(e){console.error("Error al eliminar parto:",e);let t=e.message||"Error desconocido";t.includes("500")?t="Error interno del servidor. Posible problema con la base de datos.":t.includes("404")?t="No se encontr√≥ el recurso. Es posible que el parto ya haya sido eliminado.":t.includes("403")?t="No tiene permisos para eliminar este parto.":t.includes("401")&&(t="Su sesi√≥n ha expirado. Por favor, inicie sesi√≥n nuevamente."),H(`Error al eliminar parto: ${t}`,"error")})}})})});
